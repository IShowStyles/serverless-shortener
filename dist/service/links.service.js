"use strict";var to=Object.create;var le=Object.defineProperty,no=Object.defineProperties,so=Object.getOwnPropertyDescriptor,io=Object.getOwnPropertyDescriptors,oo=Object.getOwnPropertyNames,et=Object.getOwnPropertySymbols,ao=Object.getPrototypeOf,tt=Object.prototype.hasOwnProperty,co=Object.prototype.propertyIsEnumerable;var rt=(e,r,t)=>r in e?le(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t,nt=(e,r)=>{for(var t in r||(r={}))tt.call(r,t)&&rt(e,t,r[t]);if(et)for(var t of et(r))co.call(r,t)&&rt(e,t,r[t]);return e},st=(e,r)=>no(e,io(r));var h=(e,r)=>()=>(r||e((r={exports:{}}).exports,r),r.exports),uo=(e,r)=>{for(var t in r)le(e,t,{get:r[t],enumerable:!0})},it=(e,r,t,n)=>{if(r&&typeof r=="object"||typeof r=="function")for(let s of oo(r))!tt.call(e,s)&&s!==t&&le(e,s,{get:()=>r[s],enumerable:!(n=so(r,s))||n.enumerable});return e};var sr=(e,r,t)=>(t=e!=null?to(ao(e)):{},it(r||!e||!e.__esModule?le(t,"default",{value:e,enumerable:!0}):t,e)),fo=e=>it(le({},"__esModule",{value:!0}),e);var b=(e,r,t)=>new Promise((n,s)=>{var i=c=>{try{a(t.next(c))}catch(u){s(u)}},o=c=>{try{a(t.throw(c))}catch(u){s(u)}},a=c=>c.done?n(c.value):Promise.resolve(c.value).then(i,o);a((t=t.apply(e,r)).next())});var ot=h((Bh,lo)=>{lo.exports={name:"dotenv",version:"16.3.1",description:"Loads environment variables from .env file",main:"lib/main.js",types:"lib/main.d.ts",exports:{".":{types:"./lib/main.d.ts",require:"./lib/main.js",default:"./lib/main.js"},"./config":"./config.js","./config.js":"./config.js","./lib/env-options":"./lib/env-options.js","./lib/env-options.js":"./lib/env-options.js","./lib/cli-options":"./lib/cli-options.js","./lib/cli-options.js":"./lib/cli-options.js","./package.json":"./package.json"},scripts:{"dts-check":"tsc --project tests/types/tsconfig.json",lint:"standard","lint-readme":"standard-markdown",pretest:"npm run lint && npm run dts-check",test:"tap tests/*.js --100 -Rspec",prerelease:"npm test",release:"standard-version"},repository:{type:"git",url:"git://github.com/motdotla/dotenv.git"},funding:"https://github.com/motdotla/dotenv?sponsor=1",keywords:["dotenv","env",".env","environment","variables","config","settings"],readmeFilename:"README.md",license:"BSD-2-Clause",devDependencies:{"@definitelytyped/dtslint":"^0.0.133","@types/node":"^18.11.3",decache:"^4.6.1",sinon:"^14.0.1",standard:"^17.0.0","standard-markdown":"^7.1.0","standard-version":"^9.5.0",tap:"^16.3.0",tar:"^6.1.11",typescript:"^4.8.4"},engines:{node:">=12"},browser:{fs:!1}}});var ft=h((Gh,V)=>{var at=require("fs"),or=require("path"),ho=require("os"),po=require("crypto"),mo=ot(),ar=mo.version,Eo=/(?:^|^)\s*(?:export\s+)?([\w.-]+)(?:\s*=\s*?|:\s+?)(\s*'(?:\\'|[^'])*'|\s*"(?:\\"|[^"])*"|\s*`(?:\\`|[^`])*`|[^#\r\n]+)?\s*(?:#.*)?(?:$|$)/mg;function go(e){let r={},t=e.toString();t=t.replace(/\r\n?/mg,`
`);let n;for(;(n=Eo.exec(t))!=null;){let s=n[1],i=n[2]||"";i=i.trim();let o=i[0];i=i.replace(/^(['"`])([\s\S]*)\1$/mg,"$2"),o==='"'&&(i=i.replace(/\\n/g,`
`),i=i.replace(/\\r/g,"\r")),r[s]=i}return r}function yo(e){let r=ut(e),t=I.configDotenv({path:r});if(!t.parsed)throw new Error(`MISSING_DATA: Cannot parse ${r} for an unknown reason`);let n=ct(e).split(","),s=n.length,i;for(let o=0;o<s;o++)try{let a=n[o].trim(),c=wo(t,a);i=I.decrypt(c.ciphertext,c.key);break}catch(a){if(o+1>=s)throw a}return I.parse(i)}function vo(e){console.log(`[dotenv@${ar}][INFO] ${e}`)}function So(e){console.log(`[dotenv@${ar}][WARN] ${e}`)}function ir(e){console.log(`[dotenv@${ar}][DEBUG] ${e}`)}function ct(e){return e&&e.DOTENV_KEY&&e.DOTENV_KEY.length>0?e.DOTENV_KEY:process.env.DOTENV_KEY&&process.env.DOTENV_KEY.length>0?process.env.DOTENV_KEY:""}function wo(e,r){let t;try{t=new URL(r)}catch(a){throw a.code==="ERR_INVALID_URL"?new Error("INVALID_DOTENV_KEY: Wrong format. Must be in valid uri format like dotenv://:key_1234@dotenv.org/vault/.env.vault?environment=development"):a}let n=t.password;if(!n)throw new Error("INVALID_DOTENV_KEY: Missing key part");let s=t.searchParams.get("environment");if(!s)throw new Error("INVALID_DOTENV_KEY: Missing environment part");let i=`DOTENV_VAULT_${s.toUpperCase()}`,o=e.parsed[i];if(!o)throw new Error(`NOT_FOUND_DOTENV_ENVIRONMENT: Cannot locate environment ${i} in your .env.vault file.`);return{ciphertext:o,key:n}}function ut(e){let r=or.resolve(process.cwd(),".env");return e&&e.path&&e.path.length>0&&(r=e.path),r.endsWith(".vault")?r:`${r}.vault`}function bo(e){return e[0]==="~"?or.join(ho.homedir(),e.slice(1)):e}function Io(e){vo("Loading env from encrypted .env.vault");let r=I._parseVault(e),t=process.env;return e&&e.processEnv!=null&&(t=e.processEnv),I.populate(t,r,e),{parsed:r}}function To(e){let r=or.resolve(process.cwd(),".env"),t="utf8",n=!!(e&&e.debug);e&&(e.path!=null&&(r=bo(e.path)),e.encoding!=null&&(t=e.encoding));try{let s=I.parse(at.readFileSync(r,{encoding:t})),i=process.env;return e&&e.processEnv!=null&&(i=e.processEnv),I.populate(i,s,e),{parsed:s}}catch(s){return n&&ir(`Failed to load ${r} ${s.message}`),{error:s}}}function Ro(e){let r=ut(e);return ct(e).length===0?I.configDotenv(e):at.existsSync(r)?I._configVault(e):(So(`You set DOTENV_KEY but you are missing a .env.vault file at ${r}. Did you forget to build it?`),I.configDotenv(e))}function Ao(e,r){let t=Buffer.from(r.slice(-64),"hex"),n=Buffer.from(e,"base64"),s=n.slice(0,12),i=n.slice(-16);n=n.slice(12,-16);try{let o=po.createDecipheriv("aes-256-gcm",t,s);return o.setAuthTag(i),`${o.update(n)}${o.final()}`}catch(o){let a=o instanceof RangeError,c=o.message==="Invalid key length",u=o.message==="Unsupported state or unable to authenticate data";if(a||c){let l="INVALID_DOTENV_KEY: It must be 64 characters long (or more)";throw new Error(l)}else if(u){let l="DECRYPTION_FAILED: Please check your DOTENV_KEY";throw new Error(l)}else throw console.error("Error: ",o.code),console.error("Error: ",o.message),o}}function $o(e,r,t={}){let n=!!(t&&t.debug),s=!!(t&&t.override);if(typeof r!="object")throw new Error("OBJECT_REQUIRED: Please check the processEnv argument being passed to populate");for(let i of Object.keys(r))Object.prototype.hasOwnProperty.call(e,i)?(s===!0&&(e[i]=r[i]),n&&ir(s===!0?`"${i}" is already defined and WAS overwritten`:`"${i}" is already defined and was NOT overwritten`)):e[i]=r[i]}var I={configDotenv:To,_configVault:Io,_parseVault:yo,config:Ro,decrypt:Ao,parse:go,populate:$o};V.exports.configDotenv=I.configDotenv;V.exports._configVault=I._configVault;V.exports._parseVault=I._parseVault;V.exports.config=I.config;V.exports.decrypt=I.decrypt;V.exports.parse=I.parse;V.exports.populate=I.populate;V.exports=I});var Z=h((cr,mt)=>{var Ne=require("buffer"),B=Ne.Buffer;function dt(e,r){for(var t in e)r[t]=e[t]}B.from&&B.alloc&&B.allocUnsafe&&B.allocUnsafeSlow?mt.exports=Ne:(dt(Ne,cr),cr.Buffer=Q);function Q(e,r,t){return B(e,r,t)}dt(B,Q);Q.from=function(e,r,t){if(typeof e=="number")throw new TypeError("Argument must not be a number");return B(e,r,t)};Q.alloc=function(e,r,t){if(typeof e!="number")throw new TypeError("Argument must be a number");var n=B(e);return r!==void 0?typeof t=="string"?n.fill(r,t):n.fill(r):n.fill(0),n};Q.allocUnsafe=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return B(e)};Q.allocUnsafeSlow=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return Ne.SlowBuffer(e)}});var ur=h((Yh,Et)=>{var xe=Z().Buffer,No=require("stream"),xo=require("util");function Le(e){if(this.buffer=null,this.writable=!0,this.readable=!0,!e)return this.buffer=xe.alloc(0),this;if(typeof e.pipe=="function")return this.buffer=xe.alloc(0),e.pipe(this),this;if(e.length||typeof e=="object")return this.buffer=e,this.writable=!1,process.nextTick(function(){this.emit("end",e),this.readable=!1,this.emit("close")}.bind(this)),this;throw new TypeError("Unexpected data type ("+typeof e+")")}xo.inherits(Le,No);Le.prototype.write=function(r){this.buffer=xe.concat([this.buffer,xe.from(r)]),this.emit("data",r)};Le.prototype.end=function(r){r&&this.write(r),this.emit("end",r),this.emit("close"),this.writable=!1,this.readable=!1};Et.exports=Le});var yt=h((Jh,gt)=>{"use strict";var he=require("buffer").Buffer,fr=require("buffer").SlowBuffer;gt.exports=Oe;function Oe(e,r){if(!he.isBuffer(e)||!he.isBuffer(r)||e.length!==r.length)return!1;for(var t=0,n=0;n<e.length;n++)t|=e[n]^r[n];return t===0}Oe.install=function(){he.prototype.equal=fr.prototype.equal=function(r){return Oe(this,r)}};var Lo=he.prototype.equal,Oo=fr.prototype.equal;Oe.restore=function(){he.prototype.equal=Lo,fr.prototype.equal=Oo}});var St=h((zh,vt)=>{"use strict";function lr(e){var r=(e/8|0)+(e%8===0?0:1);return r}var qo={ES256:lr(256),ES384:lr(384),ES512:lr(521)};function _o(e){var r=qo[e];if(r)return r;throw new Error('Unknown algorithm "'+e+'"')}vt.exports=_o});var $t=h((Qh,At)=>{"use strict";var qe=Z().Buffer,bt=St(),_e=128,It=0,jo=32,Do=16,Po=2,Tt=Do|jo|It<<6,je=Po|It<<6;function Co(e){return e.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Rt(e){if(qe.isBuffer(e))return e;if(typeof e=="string")return qe.from(e,"base64");throw new TypeError("ECDSA signature must be a Base64 string or a Buffer")}function Vo(e,r){e=Rt(e);var t=bt(r),n=t+1,s=e.length,i=0;if(e[i++]!==Tt)throw new Error('Could not find expected "seq"');var o=e[i++];if(o===(_e|1)&&(o=e[i++]),s-i<o)throw new Error('"seq" specified length of "'+o+'", only "'+(s-i)+'" remaining');if(e[i++]!==je)throw new Error('Could not find expected "int" for "r"');var a=e[i++];if(s-i-2<a)throw new Error('"r" specified length of "'+a+'", only "'+(s-i-2)+'" available');if(n<a)throw new Error('"r" specified length of "'+a+'", max of "'+n+'" is acceptable');var c=i;if(i+=a,e[i++]!==je)throw new Error('Could not find expected "int" for "s"');var u=e[i++];if(s-i!==u)throw new Error('"s" specified length of "'+u+'", expected "'+(s-i)+'"');if(n<u)throw new Error('"s" specified length of "'+u+'", max of "'+n+'" is acceptable');var l=i;if(i+=u,i!==s)throw new Error('Expected to consume entire buffer, but "'+(s-i)+'" bytes remain');var f=t-a,g=t-u,m=qe.allocUnsafe(f+a+g+u);for(i=0;i<f;++i)m[i]=0;e.copy(m,i,c+Math.max(-f,0),c+a),i=t;for(var w=i;i<w+g;++i)m[i]=0;return e.copy(m,i,l+Math.max(-g,0),l+u),m=m.toString("base64"),m=Co(m),m}function wt(e,r,t){for(var n=0;r+n<t&&e[r+n]===0;)++n;var s=e[r+n]>=_e;return s&&--n,n}function Bo(e,r){e=Rt(e);var t=bt(r),n=e.length;if(n!==t*2)throw new TypeError('"'+r+'" signatures must be "'+t*2+'" bytes, saw "'+n+'"');var s=wt(e,0,t),i=wt(e,t,e.length),o=t-s,a=t-i,c=1+1+o+1+1+a,u=c<_e,l=qe.allocUnsafe((u?2:3)+c),f=0;return l[f++]=Tt,u?l[f++]=c:(l[f++]=_e|1,l[f++]=c&255),l[f++]=je,l[f++]=o,s<0?(l[f++]=0,f+=e.copy(l,f,0,t)):f+=e.copy(l,f,s,t),l[f++]=je,l[f++]=a,i<0?(l[f++]=0,e.copy(l,f,t)):e.copy(l,f,t+i),l}At.exports={derToJose:Vo,joseToDer:Bo}});var dr=h((Zh,Pt)=>{var Go=yt(),re=Z().Buffer,P=require("crypto"),xt=$t(),Nt=require("util"),ko=`"%s" is not a valid algorithm.
  Supported algorithms are:
  "HS256", "HS384", "HS512", "RS256", "RS384", "RS512", "PS256", "PS384", "PS512", "ES256", "ES384", "ES512" and "none".`,pe="secret must be a string or buffer",ee="key must be a string or a buffer",Fo="key must be a string, a buffer or an object",hr=typeof P.createPublicKey=="function";hr&&(ee+=" or a KeyObject",pe+="or a KeyObject");function Lt(e){if(!re.isBuffer(e)&&typeof e!="string"&&(!hr||typeof e!="object"||typeof e.type!="string"||typeof e.asymmetricKeyType!="string"||typeof e.export!="function"))throw j(ee)}function Ot(e){if(!re.isBuffer(e)&&typeof e!="string"&&typeof e!="object")throw j(Fo)}function Uo(e){if(!re.isBuffer(e)){if(typeof e=="string")return e;if(!hr||typeof e!="object"||e.type!=="secret"||typeof e.export!="function")throw j(pe)}}function pr(e){return e.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function qt(e){e=e.toString();var r=4-e.length%4;if(r!==4)for(var t=0;t<r;++t)e+="=";return e.replace(/\-/g,"+").replace(/_/g,"/")}function j(e){var r=[].slice.call(arguments,1),t=Nt.format.bind(Nt,e).apply(null,r);return new TypeError(t)}function Ko(e){return re.isBuffer(e)||typeof e=="string"}function de(e){return Ko(e)||(e=JSON.stringify(e)),e}function _t(e){return function(t,n){Uo(n),t=de(t);var s=P.createHmac("sha"+e,n),i=(s.update(t),s.digest("base64"));return pr(i)}}function Mo(e){return function(t,n,s){var i=_t(e)(t,s);return Go(re.from(n),re.from(i))}}function jt(e){return function(t,n){Ot(n),t=de(t);var s=P.createSign("RSA-SHA"+e),i=(s.update(t),s.sign(n,"base64"));return pr(i)}}function Dt(e){return function(t,n,s){Lt(s),t=de(t),n=qt(n);var i=P.createVerify("RSA-SHA"+e);return i.update(t),i.verify(s,n,"base64")}}function Ho(e){return function(t,n){Ot(n),t=de(t);var s=P.createSign("RSA-SHA"+e),i=(s.update(t),s.sign({key:n,padding:P.constants.RSA_PKCS1_PSS_PADDING,saltLength:P.constants.RSA_PSS_SALTLEN_DIGEST},"base64"));return pr(i)}}function Xo(e){return function(t,n,s){Lt(s),t=de(t),n=qt(n);var i=P.createVerify("RSA-SHA"+e);return i.update(t),i.verify({key:s,padding:P.constants.RSA_PKCS1_PSS_PADDING,saltLength:P.constants.RSA_PSS_SALTLEN_DIGEST},n,"base64")}}function Wo(e){var r=jt(e);return function(){var n=r.apply(null,arguments);return n=xt.derToJose(n,"ES"+e),n}}function Yo(e){var r=Dt(e);return function(n,s,i){s=xt.joseToDer(s,"ES"+e).toString("base64");var o=r(n,s,i);return o}}function Jo(){return function(){return""}}function zo(){return function(r,t){return t===""}}Pt.exports=function(r){var t={hs:_t,rs:jt,ps:Ho,es:Wo,none:Jo},n={hs:Mo,rs:Dt,ps:Xo,es:Yo,none:zo},s=r.match(/^(RS|PS|ES|HS)(256|384|512)$|^(none)$/i);if(!s)throw j(ko,r);var i=(s[1]||s[3]).toLowerCase(),o=s[2];return{sign:t[i](o),verify:n[i](o)}}});var mr=h((ep,Ct)=>{var Qo=require("buffer").Buffer;Ct.exports=function(r){return typeof r=="string"?r:typeof r=="number"||Qo.isBuffer(r)?r.toString():JSON.stringify(r)}});var Ut=h((rp,Ft)=>{var Zo=Z().Buffer,Vt=ur(),ea=dr(),ra=require("stream"),Bt=mr(),Er=require("util");function Gt(e,r){return Zo.from(e,r).toString("base64").replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function ta(e,r,t){t=t||"utf8";var n=Gt(Bt(e),"binary"),s=Gt(Bt(r),t);return Er.format("%s.%s",n,s)}function kt(e){var r=e.header,t=e.payload,n=e.secret||e.privateKey,s=e.encoding,i=ea(r.alg),o=ta(r,t,s),a=i.sign(o,n);return Er.format("%s.%s",o,a)}function De(e){var r=e.secret||e.privateKey||e.key,t=new Vt(r);this.readable=!0,this.header=e.header,this.encoding=e.encoding,this.secret=this.privateKey=this.key=t,this.payload=new Vt(e.payload),this.secret.once("close",function(){!this.payload.writable&&this.readable&&this.sign()}.bind(this)),this.payload.once("close",function(){!this.secret.writable&&this.readable&&this.sign()}.bind(this))}Er.inherits(De,ra);De.prototype.sign=function(){try{var r=kt({header:this.header,payload:this.payload.buffer,secret:this.secret.buffer,encoding:this.encoding});return this.emit("done",r),this.emit("data",r),this.emit("end"),this.readable=!1,r}catch(t){this.readable=!1,this.emit("error",t),this.emit("close")}};De.sign=kt;Ft.exports=De});var Zt=h((tp,Qt)=>{var Mt=Z().Buffer,Kt=ur(),na=dr(),sa=require("stream"),Ht=mr(),ia=require("util"),oa=/^[a-zA-Z0-9\-_]+?\.[a-zA-Z0-9\-_]+?\.([a-zA-Z0-9\-_]+)?$/;function aa(e){return Object.prototype.toString.call(e)==="[object Object]"}function ca(e){if(aa(e))return e;try{return JSON.parse(e)}catch(r){return}}function Xt(e){var r=e.split(".",1)[0];return ca(Mt.from(r,"base64").toString("binary"))}function ua(e){return e.split(".",2).join(".")}function Wt(e){return e.split(".")[2]}function fa(e,r){r=r||"utf8";var t=e.split(".")[1];return Mt.from(t,"base64").toString(r)}function Yt(e){return oa.test(e)&&!!Xt(e)}function Jt(e,r,t){if(!r){var n=new Error("Missing algorithm parameter for jws.verify");throw n.code="MISSING_ALGORITHM",n}e=Ht(e);var s=Wt(e),i=ua(e),o=na(r);return o.verify(i,s,t)}function zt(e,r){if(r=r||{},e=Ht(e),!Yt(e))return null;var t=Xt(e);if(!t)return null;var n=fa(e);return(t.typ==="JWT"||r.json)&&(n=JSON.parse(n,r.encoding)),{header:t,payload:n,signature:Wt(e)}}function te(e){e=e||{};var r=e.secret||e.publicKey||e.key,t=new Kt(r);this.readable=!0,this.algorithm=e.algorithm,this.encoding=e.encoding,this.secret=this.publicKey=this.key=t,this.signature=new Kt(e.signature),this.secret.once("close",function(){!this.signature.writable&&this.readable&&this.verify()}.bind(this)),this.signature.once("close",function(){!this.secret.writable&&this.readable&&this.verify()}.bind(this))}ia.inherits(te,sa);te.prototype.verify=function(){try{var r=Jt(this.signature.buffer,this.algorithm,this.key.buffer),t=zt(this.signature.buffer,this.encoding);return this.emit("done",r,t),this.emit("data",r),this.emit("end"),this.readable=!1,r}catch(n){this.readable=!1,this.emit("error",n),this.emit("close")}};te.decode=zt;te.isValid=Yt;te.verify=Jt;Qt.exports=te});var Ce=h(K=>{var en=Ut(),Pe=Zt(),la=["HS256","HS384","HS512","RS256","RS384","RS512","PS256","PS384","PS512","ES256","ES384","ES512"];K.ALGORITHMS=la;K.sign=en.sign;K.verify=Pe.verify;K.decode=Pe.decode;K.isValid=Pe.isValid;K.createSign=function(r){return new en(r)};K.createVerify=function(r){return new Pe(r)}});var gr=h((sp,rn)=>{var ha=Ce();rn.exports=function(e,r){r=r||{};var t=ha.decode(e,r);if(!t)return null;var n=t.payload;if(typeof n=="string")try{var s=JSON.parse(n);s!==null&&typeof s=="object"&&(n=s)}catch(i){}return r.complete===!0?{header:t.header,payload:n,signature:t.signature}:n}});var me=h((ip,tn)=>{var Ve=function(e,r){Error.call(this,e),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.name="JsonWebTokenError",this.message=e,r&&(this.inner=r)};Ve.prototype=Object.create(Error.prototype);Ve.prototype.constructor=Ve;tn.exports=Ve});var yr=h((op,sn)=>{var nn=me(),Be=function(e,r){nn.call(this,e),this.name="NotBeforeError",this.date=r};Be.prototype=Object.create(nn.prototype);Be.prototype.constructor=Be;sn.exports=Be});var vr=h((ap,an)=>{var on=me(),Ge=function(e,r){on.call(this,e),this.name="TokenExpiredError",this.expiredAt=r};Ge.prototype=Object.create(on.prototype);Ge.prototype.constructor=Ge;an.exports=Ge});var un=h((cp,cn)=>{var ne=1e3,se=ne*60,ie=se*60,H=ie*24,pa=H*7,da=H*365.25;cn.exports=function(e,r){r=r||{};var t=typeof e;if(t==="string"&&e.length>0)return ma(e);if(t==="number"&&isFinite(e))return r.long?ga(e):Ea(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function ma(e){if(e=String(e),!(e.length>100)){var r=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(r){var t=parseFloat(r[1]),n=(r[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return t*da;case"weeks":case"week":case"w":return t*pa;case"days":case"day":case"d":return t*H;case"hours":case"hour":case"hrs":case"hr":case"h":return t*ie;case"minutes":case"minute":case"mins":case"min":case"m":return t*se;case"seconds":case"second":case"secs":case"sec":case"s":return t*ne;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return t;default:return}}}}function Ea(e){var r=Math.abs(e);return r>=H?Math.round(e/H)+"d":r>=ie?Math.round(e/ie)+"h":r>=se?Math.round(e/se)+"m":r>=ne?Math.round(e/ne)+"s":e+"ms"}function ga(e){var r=Math.abs(e);return r>=H?ke(e,r,H,"day"):r>=ie?ke(e,r,ie,"hour"):r>=se?ke(e,r,se,"minute"):r>=ne?ke(e,r,ne,"second"):e+" ms"}function ke(e,r,t,n){var s=r>=t*1.5;return Math.round(e/t)+" "+n+(s?"s":"")}});var Sr=h((up,fn)=>{var ya=un();fn.exports=function(e,r){var t=r||Math.floor(Date.now()/1e3);if(typeof e=="string"){var n=ya(e);return typeof n=="undefined"?void 0:Math.floor(t+n/1e3)}else return typeof e=="number"?t+e:void 0}});var Ee=h((fp,ln)=>{var va="2.0.0",Sa=Number.MAX_SAFE_INTEGER||9007199254740991,wa=16,ba=256-6,Ia=["major","premajor","minor","preminor","patch","prepatch","prerelease"];ln.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:wa,MAX_SAFE_BUILD_LENGTH:ba,MAX_SAFE_INTEGER:Sa,RELEASE_TYPES:Ia,SEMVER_SPEC_VERSION:va,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}});var ge=h((lp,hn)=>{var Ta=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};hn.exports=Ta});var oe=h((G,pn)=>{var{MAX_SAFE_COMPONENT_LENGTH:wr,MAX_SAFE_BUILD_LENGTH:Ra,MAX_LENGTH:Aa}=Ee(),$a=ge();G=pn.exports={};var Na=G.re=[],xa=G.safeRe=[],p=G.src=[],d=G.t={},La=0,br="[a-zA-Z0-9-]",Oa=[["\\s",1],["\\d",Aa],[br,Ra]],qa=e=>{for(let[r,t]of Oa)e=e.split(`${r}*`).join(`${r}{0,${t}}`).split(`${r}+`).join(`${r}{1,${t}}`);return e},E=(e,r,t)=>{let n=qa(r),s=La++;$a(e,s,r),d[e]=s,p[s]=r,Na[s]=new RegExp(r,t?"g":void 0),xa[s]=new RegExp(n,t?"g":void 0)};E("NUMERICIDENTIFIER","0|[1-9]\\d*");E("NUMERICIDENTIFIERLOOSE","\\d+");E("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${br}*`);E("MAINVERSION",`(${p[d.NUMERICIDENTIFIER]})\\.(${p[d.NUMERICIDENTIFIER]})\\.(${p[d.NUMERICIDENTIFIER]})`);E("MAINVERSIONLOOSE",`(${p[d.NUMERICIDENTIFIERLOOSE]})\\.(${p[d.NUMERICIDENTIFIERLOOSE]})\\.(${p[d.NUMERICIDENTIFIERLOOSE]})`);E("PRERELEASEIDENTIFIER",`(?:${p[d.NUMERICIDENTIFIER]}|${p[d.NONNUMERICIDENTIFIER]})`);E("PRERELEASEIDENTIFIERLOOSE",`(?:${p[d.NUMERICIDENTIFIERLOOSE]}|${p[d.NONNUMERICIDENTIFIER]})`);E("PRERELEASE",`(?:-(${p[d.PRERELEASEIDENTIFIER]}(?:\\.${p[d.PRERELEASEIDENTIFIER]})*))`);E("PRERELEASELOOSE",`(?:-?(${p[d.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${p[d.PRERELEASEIDENTIFIERLOOSE]})*))`);E("BUILDIDENTIFIER",`${br}+`);E("BUILD",`(?:\\+(${p[d.BUILDIDENTIFIER]}(?:\\.${p[d.BUILDIDENTIFIER]})*))`);E("FULLPLAIN",`v?${p[d.MAINVERSION]}${p[d.PRERELEASE]}?${p[d.BUILD]}?`);E("FULL",`^${p[d.FULLPLAIN]}$`);E("LOOSEPLAIN",`[v=\\s]*${p[d.MAINVERSIONLOOSE]}${p[d.PRERELEASELOOSE]}?${p[d.BUILD]}?`);E("LOOSE",`^${p[d.LOOSEPLAIN]}$`);E("GTLT","((?:<|>)?=?)");E("XRANGEIDENTIFIERLOOSE",`${p[d.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);E("XRANGEIDENTIFIER",`${p[d.NUMERICIDENTIFIER]}|x|X|\\*`);E("XRANGEPLAIN",`[v=\\s]*(${p[d.XRANGEIDENTIFIER]})(?:\\.(${p[d.XRANGEIDENTIFIER]})(?:\\.(${p[d.XRANGEIDENTIFIER]})(?:${p[d.PRERELEASE]})?${p[d.BUILD]}?)?)?`);E("XRANGEPLAINLOOSE",`[v=\\s]*(${p[d.XRANGEIDENTIFIERLOOSE]})(?:\\.(${p[d.XRANGEIDENTIFIERLOOSE]})(?:\\.(${p[d.XRANGEIDENTIFIERLOOSE]})(?:${p[d.PRERELEASELOOSE]})?${p[d.BUILD]}?)?)?`);E("XRANGE",`^${p[d.GTLT]}\\s*${p[d.XRANGEPLAIN]}$`);E("XRANGELOOSE",`^${p[d.GTLT]}\\s*${p[d.XRANGEPLAINLOOSE]}$`);E("COERCE",`(^|[^\\d])(\\d{1,${wr}})(?:\\.(\\d{1,${wr}}))?(?:\\.(\\d{1,${wr}}))?(?:$|[^\\d])`);E("COERCERTL",p[d.COERCE],!0);E("LONETILDE","(?:~>?)");E("TILDETRIM",`(\\s*)${p[d.LONETILDE]}\\s+`,!0);G.tildeTrimReplace="$1~";E("TILDE",`^${p[d.LONETILDE]}${p[d.XRANGEPLAIN]}$`);E("TILDELOOSE",`^${p[d.LONETILDE]}${p[d.XRANGEPLAINLOOSE]}$`);E("LONECARET","(?:\\^)");E("CARETTRIM",`(\\s*)${p[d.LONECARET]}\\s+`,!0);G.caretTrimReplace="$1^";E("CARET",`^${p[d.LONECARET]}${p[d.XRANGEPLAIN]}$`);E("CARETLOOSE",`^${p[d.LONECARET]}${p[d.XRANGEPLAINLOOSE]}$`);E("COMPARATORLOOSE",`^${p[d.GTLT]}\\s*(${p[d.LOOSEPLAIN]})$|^$`);E("COMPARATOR",`^${p[d.GTLT]}\\s*(${p[d.FULLPLAIN]})$|^$`);E("COMPARATORTRIM",`(\\s*)${p[d.GTLT]}\\s*(${p[d.LOOSEPLAIN]}|${p[d.XRANGEPLAIN]})`,!0);G.comparatorTrimReplace="$1$2$3";E("HYPHENRANGE",`^\\s*(${p[d.XRANGEPLAIN]})\\s+-\\s+(${p[d.XRANGEPLAIN]})\\s*$`);E("HYPHENRANGELOOSE",`^\\s*(${p[d.XRANGEPLAINLOOSE]})\\s+-\\s+(${p[d.XRANGEPLAINLOOSE]})\\s*$`);E("STAR","(<|>)?=?\\s*\\*");E("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");E("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")});var Fe=h((hp,dn)=>{var _a=Object.freeze({loose:!0}),ja=Object.freeze({}),Da=e=>e?typeof e!="object"?_a:e:ja;dn.exports=Da});var Ir=h((pp,gn)=>{var mn=/^[0-9]+$/,En=(e,r)=>{let t=mn.test(e),n=mn.test(r);return t&&n&&(e=+e,r=+r),e===r?0:t&&!n?-1:n&&!t?1:e<r?-1:1},Pa=(e,r)=>En(r,e);gn.exports={compareIdentifiers:En,rcompareIdentifiers:Pa}});var A=h((dp,wn)=>{var Ue=ge(),{MAX_LENGTH:yn,MAX_SAFE_INTEGER:Ke}=Ee(),{safeRe:vn,t:Sn}=oe(),Ca=Fe(),{compareIdentifiers:ae}=Ir(),Tr=class e{constructor(r,t){if(t=Ca(t),r instanceof e){if(r.loose===!!t.loose&&r.includePrerelease===!!t.includePrerelease)return r;r=r.version}else if(typeof r!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof r}".`);if(r.length>yn)throw new TypeError(`version is longer than ${yn} characters`);Ue("SemVer",r,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;let n=r.trim().match(t.loose?vn[Sn.LOOSE]:vn[Sn.FULL]);if(!n)throw new TypeError(`Invalid Version: ${r}`);if(this.raw=r,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>Ke||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Ke||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Ke||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(s=>{if(/^[0-9]+$/.test(s)){let i=+s;if(i>=0&&i<Ke)return i}return s}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(r){if(Ue("SemVer.compare",this.version,this.options,r),!(r instanceof e)){if(typeof r=="string"&&r===this.version)return 0;r=new e(r,this.options)}return r.version===this.version?0:this.compareMain(r)||this.comparePre(r)}compareMain(r){return r instanceof e||(r=new e(r,this.options)),ae(this.major,r.major)||ae(this.minor,r.minor)||ae(this.patch,r.patch)}comparePre(r){if(r instanceof e||(r=new e(r,this.options)),this.prerelease.length&&!r.prerelease.length)return-1;if(!this.prerelease.length&&r.prerelease.length)return 1;if(!this.prerelease.length&&!r.prerelease.length)return 0;let t=0;do{let n=this.prerelease[t],s=r.prerelease[t];if(Ue("prerelease compare",t,n,s),n===void 0&&s===void 0)return 0;if(s===void 0)return 1;if(n===void 0)return-1;if(n===s)continue;return ae(n,s)}while(++t)}compareBuild(r){r instanceof e||(r=new e(r,this.options));let t=0;do{let n=this.build[t],s=r.build[t];if(Ue("prerelease compare",t,n,s),n===void 0&&s===void 0)return 0;if(s===void 0)return 1;if(n===void 0)return-1;if(n===s)continue;return ae(n,s)}while(++t)}inc(r,t,n){switch(r){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t,n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t,n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t,n),this.inc("pre",t,n);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",t,n),this.inc("pre",t,n);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{let s=Number(n)?1:0;if(!t&&n===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[s];else{let i=this.prerelease.length;for(;--i>=0;)typeof this.prerelease[i]=="number"&&(this.prerelease[i]++,i=-2);if(i===-1){if(t===this.prerelease.join(".")&&n===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(s)}}if(t){let i=[t,s];n===!1&&(i=[t]),ae(this.prerelease[0],t)===0?isNaN(this.prerelease[1])&&(this.prerelease=i):this.prerelease=i}break}default:throw new Error(`invalid increment argument: ${r}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};wn.exports=Tr});var X=h((mp,In)=>{var bn=A(),Va=(e,r,t=!1)=>{if(e instanceof bn)return e;try{return new bn(e,r)}catch(n){if(!t)return null;throw n}};In.exports=Va});var Rn=h((Ep,Tn)=>{var Ba=X(),Ga=(e,r)=>{let t=Ba(e,r);return t?t.version:null};Tn.exports=Ga});var $n=h((gp,An)=>{var ka=X(),Fa=(e,r)=>{let t=ka(e.trim().replace(/^[=v]+/,""),r);return t?t.version:null};An.exports=Fa});var Ln=h((yp,xn)=>{var Nn=A(),Ua=(e,r,t,n,s)=>{typeof t=="string"&&(s=n,n=t,t=void 0);try{return new Nn(e instanceof Nn?e.version:e,t).inc(r,n,s).version}catch(i){return null}};xn.exports=Ua});var _n=h((vp,qn)=>{var On=X(),Ka=(e,r)=>{let t=On(e,null,!0),n=On(r,null,!0),s=t.compare(n);if(s===0)return null;let i=s>0,o=i?t:n,a=i?n:t,c=!!o.prerelease.length;if(!!a.prerelease.length&&!c)return!a.patch&&!a.minor?"major":o.patch?"patch":o.minor?"minor":"major";let l=c?"pre":"";return t.major!==n.major?l+"major":t.minor!==n.minor?l+"minor":t.patch!==n.patch?l+"patch":"prerelease"};qn.exports=Ka});var Dn=h((Sp,jn)=>{var Ma=A(),Ha=(e,r)=>new Ma(e,r).major;jn.exports=Ha});var Cn=h((wp,Pn)=>{var Xa=A(),Wa=(e,r)=>new Xa(e,r).minor;Pn.exports=Wa});var Bn=h((bp,Vn)=>{var Ya=A(),Ja=(e,r)=>new Ya(e,r).patch;Vn.exports=Ja});var kn=h((Ip,Gn)=>{var za=X(),Qa=(e,r)=>{let t=za(e,r);return t&&t.prerelease.length?t.prerelease:null};Gn.exports=Qa});var q=h((Tp,Un)=>{var Fn=A(),Za=(e,r,t)=>new Fn(e,t).compare(new Fn(r,t));Un.exports=Za});var Mn=h((Rp,Kn)=>{var ec=q(),rc=(e,r,t)=>ec(r,e,t);Kn.exports=rc});var Xn=h((Ap,Hn)=>{var tc=q(),nc=(e,r)=>tc(e,r,!0);Hn.exports=nc});var Me=h(($p,Yn)=>{var Wn=A(),sc=(e,r,t)=>{let n=new Wn(e,t),s=new Wn(r,t);return n.compare(s)||n.compareBuild(s)};Yn.exports=sc});var zn=h((Np,Jn)=>{var ic=Me(),oc=(e,r)=>e.sort((t,n)=>ic(t,n,r));Jn.exports=oc});var Zn=h((xp,Qn)=>{var ac=Me(),cc=(e,r)=>e.sort((t,n)=>ac(n,t,r));Qn.exports=cc});var ye=h((Lp,es)=>{var uc=q(),fc=(e,r,t)=>uc(e,r,t)>0;es.exports=fc});var He=h((Op,rs)=>{var lc=q(),hc=(e,r,t)=>lc(e,r,t)<0;rs.exports=hc});var Rr=h((qp,ts)=>{var pc=q(),dc=(e,r,t)=>pc(e,r,t)===0;ts.exports=dc});var Ar=h((_p,ns)=>{var mc=q(),Ec=(e,r,t)=>mc(e,r,t)!==0;ns.exports=Ec});var Xe=h((jp,ss)=>{var gc=q(),yc=(e,r,t)=>gc(e,r,t)>=0;ss.exports=yc});var We=h((Dp,is)=>{var vc=q(),Sc=(e,r,t)=>vc(e,r,t)<=0;is.exports=Sc});var $r=h((Pp,os)=>{var wc=Rr(),bc=Ar(),Ic=ye(),Tc=Xe(),Rc=He(),Ac=We(),$c=(e,r,t,n)=>{switch(r){case"===":return typeof e=="object"&&(e=e.version),typeof t=="object"&&(t=t.version),e===t;case"!==":return typeof e=="object"&&(e=e.version),typeof t=="object"&&(t=t.version),e!==t;case"":case"=":case"==":return wc(e,t,n);case"!=":return bc(e,t,n);case">":return Ic(e,t,n);case">=":return Tc(e,t,n);case"<":return Rc(e,t,n);case"<=":return Ac(e,t,n);default:throw new TypeError(`Invalid operator: ${r}`)}};os.exports=$c});var cs=h((Cp,as)=>{var Nc=A(),xc=X(),{safeRe:Ye,t:Je}=oe(),Lc=(e,r)=>{if(e instanceof Nc)return e;if(typeof e=="number"&&(e=String(e)),typeof e!="string")return null;r=r||{};let t=null;if(!r.rtl)t=e.match(Ye[Je.COERCE]);else{let n;for(;(n=Ye[Je.COERCERTL].exec(e))&&(!t||t.index+t[0].length!==e.length);)(!t||n.index+n[0].length!==t.index+t[0].length)&&(t=n),Ye[Je.COERCERTL].lastIndex=n.index+n[1].length+n[2].length;Ye[Je.COERCERTL].lastIndex=-1}return t===null?null:xc(`${t[2]}.${t[3]||"0"}.${t[4]||"0"}`,r)};as.exports=Lc});var fs=h((Vp,us)=>{"use strict";us.exports=function(e){e.prototype[Symbol.iterator]=function*(){for(let r=this.head;r;r=r.next)yield r.value}}});var hs=h((Bp,ls)=>{"use strict";ls.exports=y;y.Node=W;y.create=y;function y(e){var r=this;if(r instanceof y||(r=new y),r.tail=null,r.head=null,r.length=0,e&&typeof e.forEach=="function")e.forEach(function(s){r.push(s)});else if(arguments.length>0)for(var t=0,n=arguments.length;t<n;t++)r.push(arguments[t]);return r}y.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var r=e.next,t=e.prev;return r&&(r.prev=t),t&&(t.next=r),e===this.head&&(this.head=r),e===this.tail&&(this.tail=t),e.list.length--,e.next=null,e.prev=null,e.list=null,r};y.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var r=this.head;e.list=this,e.next=r,r&&(r.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}};y.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var r=this.tail;e.list=this,e.prev=r,r&&(r.next=e),this.tail=e,this.head||(this.head=e),this.length++}};y.prototype.push=function(){for(var e=0,r=arguments.length;e<r;e++)qc(this,arguments[e]);return this.length};y.prototype.unshift=function(){for(var e=0,r=arguments.length;e<r;e++)_c(this,arguments[e]);return this.length};y.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}};y.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}};y.prototype.forEach=function(e,r){r=r||this;for(var t=this.head,n=0;t!==null;n++)e.call(r,t.value,n,this),t=t.next};y.prototype.forEachReverse=function(e,r){r=r||this;for(var t=this.tail,n=this.length-1;t!==null;n--)e.call(r,t.value,n,this),t=t.prev};y.prototype.get=function(e){for(var r=0,t=this.head;t!==null&&r<e;r++)t=t.next;if(r===e&&t!==null)return t.value};y.prototype.getReverse=function(e){for(var r=0,t=this.tail;t!==null&&r<e;r++)t=t.prev;if(r===e&&t!==null)return t.value};y.prototype.map=function(e,r){r=r||this;for(var t=new y,n=this.head;n!==null;)t.push(e.call(r,n.value,this)),n=n.next;return t};y.prototype.mapReverse=function(e,r){r=r||this;for(var t=new y,n=this.tail;n!==null;)t.push(e.call(r,n.value,this)),n=n.prev;return t};y.prototype.reduce=function(e,r){var t,n=this.head;if(arguments.length>1)t=r;else if(this.head)n=this.head.next,t=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var s=0;n!==null;s++)t=e(t,n.value,s),n=n.next;return t};y.prototype.reduceReverse=function(e,r){var t,n=this.tail;if(arguments.length>1)t=r;else if(this.tail)n=this.tail.prev,t=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var s=this.length-1;n!==null;s--)t=e(t,n.value,s),n=n.prev;return t};y.prototype.toArray=function(){for(var e=new Array(this.length),r=0,t=this.head;t!==null;r++)e[r]=t.value,t=t.next;return e};y.prototype.toArrayReverse=function(){for(var e=new Array(this.length),r=0,t=this.tail;t!==null;r++)e[r]=t.value,t=t.prev;return e};y.prototype.slice=function(e,r){r=r||this.length,r<0&&(r+=this.length),e=e||0,e<0&&(e+=this.length);var t=new y;if(r<e||r<0)return t;e<0&&(e=0),r>this.length&&(r=this.length);for(var n=0,s=this.head;s!==null&&n<e;n++)s=s.next;for(;s!==null&&n<r;n++,s=s.next)t.push(s.value);return t};y.prototype.sliceReverse=function(e,r){r=r||this.length,r<0&&(r+=this.length),e=e||0,e<0&&(e+=this.length);var t=new y;if(r<e||r<0)return t;e<0&&(e=0),r>this.length&&(r=this.length);for(var n=this.length,s=this.tail;s!==null&&n>r;n--)s=s.prev;for(;s!==null&&n>e;n--,s=s.prev)t.push(s.value);return t};y.prototype.splice=function(e,r,...t){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var n=0,s=this.head;s!==null&&n<e;n++)s=s.next;for(var i=[],n=0;s&&n<r;n++)i.push(s.value),s=this.removeNode(s);s===null&&(s=this.tail),s!==this.head&&s!==this.tail&&(s=s.prev);for(var n=0;n<t.length;n++)s=Oc(this,s,t[n]);return i};y.prototype.reverse=function(){for(var e=this.head,r=this.tail,t=e;t!==null;t=t.prev){var n=t.prev;t.prev=t.next,t.next=n}return this.head=r,this.tail=e,this};function Oc(e,r,t){var n=r===e.head?new W(t,null,r,e):new W(t,r,r.next,e);return n.next===null&&(e.tail=n),n.prev===null&&(e.head=n),e.length++,n}function qc(e,r){e.tail=new W(r,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function _c(e,r){e.head=new W(r,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function W(e,r,t,n){if(!(this instanceof W))return new W(e,r,t,n);this.list=n,this.value=e,r?(r.next=this,this.prev=r):this.prev=null,t?(t.prev=this,this.next=t):this.next=null}try{fs()(y)}catch(e){}});var gs=h((Gp,Es)=>{"use strict";var jc=hs(),Y=Symbol("max"),F=Symbol("length"),ce=Symbol("lengthCalculator"),Se=Symbol("allowStale"),J=Symbol("maxAge"),k=Symbol("dispose"),ps=Symbol("noDisposeOnSet"),R=Symbol("lruList"),D=Symbol("cache"),ms=Symbol("updateAgeOnGet"),Nr=()=>1,Lr=class{constructor(r){if(typeof r=="number"&&(r={max:r}),r||(r={}),r.max&&(typeof r.max!="number"||r.max<0))throw new TypeError("max must be a non-negative number");let t=this[Y]=r.max||1/0,n=r.length||Nr;if(this[ce]=typeof n!="function"?Nr:n,this[Se]=r.stale||!1,r.maxAge&&typeof r.maxAge!="number")throw new TypeError("maxAge must be a number");this[J]=r.maxAge||0,this[k]=r.dispose,this[ps]=r.noDisposeOnSet||!1,this[ms]=r.updateAgeOnGet||!1,this.reset()}set max(r){if(typeof r!="number"||r<0)throw new TypeError("max must be a non-negative number");this[Y]=r||1/0,ve(this)}get max(){return this[Y]}set allowStale(r){this[Se]=!!r}get allowStale(){return this[Se]}set maxAge(r){if(typeof r!="number")throw new TypeError("maxAge must be a non-negative number");this[J]=r,ve(this)}get maxAge(){return this[J]}set lengthCalculator(r){typeof r!="function"&&(r=Nr),r!==this[ce]&&(this[ce]=r,this[F]=0,this[R].forEach(t=>{t.length=this[ce](t.value,t.key),this[F]+=t.length})),ve(this)}get lengthCalculator(){return this[ce]}get length(){return this[F]}get itemCount(){return this[R].length}rforEach(r,t){t=t||this;for(let n=this[R].tail;n!==null;){let s=n.prev;ds(this,r,n,t),n=s}}forEach(r,t){t=t||this;for(let n=this[R].head;n!==null;){let s=n.next;ds(this,r,n,t),n=s}}keys(){return this[R].toArray().map(r=>r.key)}values(){return this[R].toArray().map(r=>r.value)}reset(){this[k]&&this[R]&&this[R].length&&this[R].forEach(r=>this[k](r.key,r.value)),this[D]=new Map,this[R]=new jc,this[F]=0}dump(){return this[R].map(r=>ze(this,r)?!1:{k:r.key,v:r.value,e:r.now+(r.maxAge||0)}).toArray().filter(r=>r)}dumpLru(){return this[R]}set(r,t,n){if(n=n||this[J],n&&typeof n!="number")throw new TypeError("maxAge must be a number");let s=n?Date.now():0,i=this[ce](t,r);if(this[D].has(r)){if(i>this[Y])return ue(this,this[D].get(r)),!1;let c=this[D].get(r).value;return this[k]&&(this[ps]||this[k](r,c.value)),c.now=s,c.maxAge=n,c.value=t,this[F]+=i-c.length,c.length=i,this.get(r),ve(this),!0}let o=new Or(r,t,i,s,n);return o.length>this[Y]?(this[k]&&this[k](r,t),!1):(this[F]+=o.length,this[R].unshift(o),this[D].set(r,this[R].head),ve(this),!0)}has(r){if(!this[D].has(r))return!1;let t=this[D].get(r).value;return!ze(this,t)}get(r){return xr(this,r,!0)}peek(r){return xr(this,r,!1)}pop(){let r=this[R].tail;return r?(ue(this,r),r.value):null}del(r){ue(this,this[D].get(r))}load(r){this.reset();let t=Date.now();for(let n=r.length-1;n>=0;n--){let s=r[n],i=s.e||0;if(i===0)this.set(s.k,s.v);else{let o=i-t;o>0&&this.set(s.k,s.v,o)}}}prune(){this[D].forEach((r,t)=>xr(this,t,!1))}},xr=(e,r,t)=>{let n=e[D].get(r);if(n){let s=n.value;if(ze(e,s)){if(ue(e,n),!e[Se])return}else t&&(e[ms]&&(n.value.now=Date.now()),e[R].unshiftNode(n));return s.value}},ze=(e,r)=>{if(!r||!r.maxAge&&!e[J])return!1;let t=Date.now()-r.now;return r.maxAge?t>r.maxAge:e[J]&&t>e[J]},ve=e=>{if(e[F]>e[Y])for(let r=e[R].tail;e[F]>e[Y]&&r!==null;){let t=r.prev;ue(e,r),r=t}},ue=(e,r)=>{if(r){let t=r.value;e[k]&&e[k](t.key,t.value),e[F]-=t.length,e[D].delete(t.key),e[R].removeNode(r)}},Or=class{constructor(r,t,n,s,i){this.key=r,this.value=t,this.length=n,this.now=s,this.maxAge=i||0}},ds=(e,r,t,n)=>{let s=t.value;ze(e,s)&&(ue(e,t),e[Se]||(s=void 0)),s&&r.call(n,s.value,s.key,e)};Es.exports=Lr});var _=h((kp,ws)=>{var qr=class e{constructor(r,t){if(t=Pc(t),r instanceof e)return r.loose===!!t.loose&&r.includePrerelease===!!t.includePrerelease?r:new e(r.raw,t);if(r instanceof _r)return this.raw=r.value,this.set=[[r]],this.format(),this;if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=r.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(n=>this.parseRange(n.trim())).filter(n=>n.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){let n=this.set[0];if(this.set=this.set.filter(s=>!vs(s[0])),this.set.length===0)this.set=[n];else if(this.set.length>1){for(let s of this.set)if(s.length===1&&Uc(s[0])){this.set=[s];break}}}this.format()}format(){return this.range=this.set.map(r=>r.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(r){let n=((this.options.includePrerelease&&kc)|(this.options.loose&&Fc))+":"+r,s=ys.get(n);if(s)return s;let i=this.options.loose,o=i?O[$.HYPHENRANGELOOSE]:O[$.HYPHENRANGE];r=r.replace(o,Zc(this.options.includePrerelease)),S("hyphen replace",r),r=r.replace(O[$.COMPARATORTRIM],Vc),S("comparator trim",r),r=r.replace(O[$.TILDETRIM],Bc),S("tilde trim",r),r=r.replace(O[$.CARETTRIM],Gc),S("caret trim",r);let a=r.split(" ").map(f=>Kc(f,this.options)).join(" ").split(/\s+/).map(f=>Qc(f,this.options));i&&(a=a.filter(f=>(S("loose invalid filter",f,this.options),!!f.match(O[$.COMPARATORLOOSE])))),S("range list",a);let c=new Map,u=a.map(f=>new _r(f,this.options));for(let f of u){if(vs(f))return[f];c.set(f.value,f)}c.size>1&&c.has("")&&c.delete("");let l=[...c.values()];return ys.set(n,l),l}intersects(r,t){if(!(r instanceof e))throw new TypeError("a Range is required");return this.set.some(n=>Ss(n,t)&&r.set.some(s=>Ss(s,t)&&n.every(i=>s.every(o=>i.intersects(o,t)))))}test(r){if(!r)return!1;if(typeof r=="string")try{r=new Cc(r,this.options)}catch(t){return!1}for(let t=0;t<this.set.length;t++)if(eu(this.set[t],r,this.options))return!0;return!1}};ws.exports=qr;var Dc=gs(),ys=new Dc({max:1e3}),Pc=Fe(),_r=we(),S=ge(),Cc=A(),{safeRe:O,t:$,comparatorTrimReplace:Vc,tildeTrimReplace:Bc,caretTrimReplace:Gc}=oe(),{FLAG_INCLUDE_PRERELEASE:kc,FLAG_LOOSE:Fc}=Ee(),vs=e=>e.value==="<0.0.0-0",Uc=e=>e.value==="",Ss=(e,r)=>{let t=!0,n=e.slice(),s=n.pop();for(;t&&n.length;)t=n.every(i=>s.intersects(i,r)),s=n.pop();return t},Kc=(e,r)=>(S("comp",e,r),e=Xc(e,r),S("caret",e),e=Mc(e,r),S("tildes",e),e=Yc(e,r),S("xrange",e),e=zc(e,r),S("stars",e),e),N=e=>!e||e.toLowerCase()==="x"||e==="*",Mc=(e,r)=>e.trim().split(/\s+/).map(t=>Hc(t,r)).join(" "),Hc=(e,r)=>{let t=r.loose?O[$.TILDELOOSE]:O[$.TILDE];return e.replace(t,(n,s,i,o,a)=>{S("tilde",e,n,s,i,o,a);let c;return N(s)?c="":N(i)?c=`>=${s}.0.0 <${+s+1}.0.0-0`:N(o)?c=`>=${s}.${i}.0 <${s}.${+i+1}.0-0`:a?(S("replaceTilde pr",a),c=`>=${s}.${i}.${o}-${a} <${s}.${+i+1}.0-0`):c=`>=${s}.${i}.${o} <${s}.${+i+1}.0-0`,S("tilde return",c),c})},Xc=(e,r)=>e.trim().split(/\s+/).map(t=>Wc(t,r)).join(" "),Wc=(e,r)=>{S("caret",e,r);let t=r.loose?O[$.CARETLOOSE]:O[$.CARET],n=r.includePrerelease?"-0":"";return e.replace(t,(s,i,o,a,c)=>{S("caret",e,s,i,o,a,c);let u;return N(i)?u="":N(o)?u=`>=${i}.0.0${n} <${+i+1}.0.0-0`:N(a)?i==="0"?u=`>=${i}.${o}.0${n} <${i}.${+o+1}.0-0`:u=`>=${i}.${o}.0${n} <${+i+1}.0.0-0`:c?(S("replaceCaret pr",c),i==="0"?o==="0"?u=`>=${i}.${o}.${a}-${c} <${i}.${o}.${+a+1}-0`:u=`>=${i}.${o}.${a}-${c} <${i}.${+o+1}.0-0`:u=`>=${i}.${o}.${a}-${c} <${+i+1}.0.0-0`):(S("no pr"),i==="0"?o==="0"?u=`>=${i}.${o}.${a}${n} <${i}.${o}.${+a+1}-0`:u=`>=${i}.${o}.${a}${n} <${i}.${+o+1}.0-0`:u=`>=${i}.${o}.${a} <${+i+1}.0.0-0`),S("caret return",u),u})},Yc=(e,r)=>(S("replaceXRanges",e,r),e.split(/\s+/).map(t=>Jc(t,r)).join(" ")),Jc=(e,r)=>{e=e.trim();let t=r.loose?O[$.XRANGELOOSE]:O[$.XRANGE];return e.replace(t,(n,s,i,o,a,c)=>{S("xRange",e,n,s,i,o,a,c);let u=N(i),l=u||N(o),f=l||N(a),g=f;return s==="="&&g&&(s=""),c=r.includePrerelease?"-0":"",u?s===">"||s==="<"?n="<0.0.0-0":n="*":s&&g?(l&&(o=0),a=0,s===">"?(s=">=",l?(i=+i+1,o=0,a=0):(o=+o+1,a=0)):s==="<="&&(s="<",l?i=+i+1:o=+o+1),s==="<"&&(c="-0"),n=`${s+i}.${o}.${a}${c}`):l?n=`>=${i}.0.0${c} <${+i+1}.0.0-0`:f&&(n=`>=${i}.${o}.0${c} <${i}.${+o+1}.0-0`),S("xRange return",n),n})},zc=(e,r)=>(S("replaceStars",e,r),e.trim().replace(O[$.STAR],"")),Qc=(e,r)=>(S("replaceGTE0",e,r),e.trim().replace(O[r.includePrerelease?$.GTE0PRE:$.GTE0],"")),Zc=e=>(r,t,n,s,i,o,a,c,u,l,f,g,m)=>(N(n)?t="":N(s)?t=`>=${n}.0.0${e?"-0":""}`:N(i)?t=`>=${n}.${s}.0${e?"-0":""}`:o?t=`>=${t}`:t=`>=${t}${e?"-0":""}`,N(u)?c="":N(l)?c=`<${+u+1}.0.0-0`:N(f)?c=`<${u}.${+l+1}.0-0`:g?c=`<=${u}.${l}.${f}-${g}`:e?c=`<${u}.${l}.${+f+1}-0`:c=`<=${c}`,`${t} ${c}`.trim()),eu=(e,r,t)=>{for(let n=0;n<e.length;n++)if(!e[n].test(r))return!1;if(r.prerelease.length&&!t.includePrerelease){for(let n=0;n<e.length;n++)if(S(e[n].semver),e[n].semver!==_r.ANY&&e[n].semver.prerelease.length>0){let s=e[n].semver;if(s.major===r.major&&s.minor===r.minor&&s.patch===r.patch)return!0}return!1}return!0}});var we=h((Fp,$s)=>{var be=Symbol("SemVer ANY"),Pr=class e{static get ANY(){return be}constructor(r,t){if(t=bs(t),r instanceof e){if(r.loose===!!t.loose)return r;r=r.value}r=r.trim().split(/\s+/).join(" "),Dr("comparator",r,t),this.options=t,this.loose=!!t.loose,this.parse(r),this.semver===be?this.value="":this.value=this.operator+this.semver.version,Dr("comp",this)}parse(r){let t=this.options.loose?Is[Ts.COMPARATORLOOSE]:Is[Ts.COMPARATOR],n=r.match(t);if(!n)throw new TypeError(`Invalid comparator: ${r}`);this.operator=n[1]!==void 0?n[1]:"",this.operator==="="&&(this.operator=""),n[2]?this.semver=new Rs(n[2],this.options.loose):this.semver=be}toString(){return this.value}test(r){if(Dr("Comparator.test",r,this.options.loose),this.semver===be||r===be)return!0;if(typeof r=="string")try{r=new Rs(r,this.options)}catch(t){return!1}return jr(r,this.operator,this.semver,this.options)}intersects(r,t){if(!(r instanceof e))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new As(r.value,t).test(this.value):r.operator===""?r.value===""?!0:new As(this.value,t).test(r.semver):(t=bs(t),t.includePrerelease&&(this.value==="<0.0.0-0"||r.value==="<0.0.0-0")||!t.includePrerelease&&(this.value.startsWith("<0.0.0")||r.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&r.operator.startsWith(">")||this.operator.startsWith("<")&&r.operator.startsWith("<")||this.semver.version===r.semver.version&&this.operator.includes("=")&&r.operator.includes("=")||jr(this.semver,"<",r.semver,t)&&this.operator.startsWith(">")&&r.operator.startsWith("<")||jr(this.semver,">",r.semver,t)&&this.operator.startsWith("<")&&r.operator.startsWith(">")))}};$s.exports=Pr;var bs=Fe(),{safeRe:Is,t:Ts}=oe(),jr=$r(),Dr=ge(),Rs=A(),As=_()});var Ie=h((Up,Ns)=>{var ru=_(),tu=(e,r,t)=>{try{r=new ru(r,t)}catch(n){return!1}return r.test(e)};Ns.exports=tu});var Ls=h((Kp,xs)=>{var nu=_(),su=(e,r)=>new nu(e,r).set.map(t=>t.map(n=>n.value).join(" ").trim().split(" "));xs.exports=su});var qs=h((Mp,Os)=>{var iu=A(),ou=_(),au=(e,r,t)=>{let n=null,s=null,i=null;try{i=new ou(r,t)}catch(o){return null}return e.forEach(o=>{i.test(o)&&(!n||s.compare(o)===-1)&&(n=o,s=new iu(n,t))}),n};Os.exports=au});var js=h((Hp,_s)=>{var cu=A(),uu=_(),fu=(e,r,t)=>{let n=null,s=null,i=null;try{i=new uu(r,t)}catch(o){return null}return e.forEach(o=>{i.test(o)&&(!n||s.compare(o)===1)&&(n=o,s=new cu(n,t))}),n};_s.exports=fu});var Cs=h((Xp,Ps)=>{var Cr=A(),lu=_(),Ds=ye(),hu=(e,r)=>{e=new lu(e,r);let t=new Cr("0.0.0");if(e.test(t)||(t=new Cr("0.0.0-0"),e.test(t)))return t;t=null;for(let n=0;n<e.set.length;++n){let s=e.set[n],i=null;s.forEach(o=>{let a=new Cr(o.semver.version);switch(o.operator){case">":a.prerelease.length===0?a.patch++:a.prerelease.push(0),a.raw=a.format();case"":case">=":(!i||Ds(a,i))&&(i=a);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${o.operator}`)}}),i&&(!t||Ds(t,i))&&(t=i)}return t&&e.test(t)?t:null};Ps.exports=hu});var Bs=h((Wp,Vs)=>{var pu=_(),du=(e,r)=>{try{return new pu(e,r).range||"*"}catch(t){return null}};Vs.exports=du});var Qe=h((Yp,Us)=>{var mu=A(),Fs=we(),{ANY:Eu}=Fs,gu=_(),yu=Ie(),Gs=ye(),ks=He(),vu=We(),Su=Xe(),wu=(e,r,t,n)=>{e=new mu(e,n),r=new gu(r,n);let s,i,o,a,c;switch(t){case">":s=Gs,i=vu,o=ks,a=">",c=">=";break;case"<":s=ks,i=Su,o=Gs,a="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(yu(e,r,n))return!1;for(let u=0;u<r.set.length;++u){let l=r.set[u],f=null,g=null;if(l.forEach(m=>{m.semver===Eu&&(m=new Fs(">=0.0.0")),f=f||m,g=g||m,s(m.semver,f.semver,n)?f=m:o(m.semver,g.semver,n)&&(g=m)}),f.operator===a||f.operator===c||(!g.operator||g.operator===a)&&i(e,g.semver))return!1;if(g.operator===c&&o(e,g.semver))return!1}return!0};Us.exports=wu});var Ms=h((Jp,Ks)=>{var bu=Qe(),Iu=(e,r,t)=>bu(e,r,">",t);Ks.exports=Iu});var Xs=h((zp,Hs)=>{var Tu=Qe(),Ru=(e,r,t)=>Tu(e,r,"<",t);Hs.exports=Ru});var Js=h((Qp,Ys)=>{var Ws=_(),Au=(e,r,t)=>(e=new Ws(e,t),r=new Ws(r,t),e.intersects(r,t));Ys.exports=Au});var Qs=h((Zp,zs)=>{var $u=Ie(),Nu=q();zs.exports=(e,r,t)=>{let n=[],s=null,i=null,o=e.sort((l,f)=>Nu(l,f,t));for(let l of o)$u(l,r,t)?(i=l,s||(s=l)):(i&&n.push([s,i]),i=null,s=null);s&&n.push([s,null]);let a=[];for(let[l,f]of n)l===f?a.push(l):!f&&l===o[0]?a.push("*"):f?l===o[0]?a.push(`<=${f}`):a.push(`${l} - ${f}`):a.push(`>=${l}`);let c=a.join(" || "),u=typeof r.raw=="string"?r.raw:String(r);return c.length<u.length?c:r}});var si=h((ed,ni)=>{var Zs=_(),Br=we(),{ANY:Vr}=Br,Te=Ie(),Gr=q(),xu=(e,r,t={})=>{if(e===r)return!0;e=new Zs(e,t),r=new Zs(r,t);let n=!1;e:for(let s of e.set){for(let i of r.set){let o=Ou(s,i,t);if(n=n||o!==null,o)continue e}if(n)return!1}return!0},Lu=[new Br(">=0.0.0-0")],ei=[new Br(">=0.0.0")],Ou=(e,r,t)=>{if(e===r)return!0;if(e.length===1&&e[0].semver===Vr){if(r.length===1&&r[0].semver===Vr)return!0;t.includePrerelease?e=Lu:e=ei}if(r.length===1&&r[0].semver===Vr){if(t.includePrerelease)return!0;r=ei}let n=new Set,s,i;for(let m of e)m.operator===">"||m.operator===">="?s=ri(s,m,t):m.operator==="<"||m.operator==="<="?i=ti(i,m,t):n.add(m.semver);if(n.size>1)return null;let o;if(s&&i){if(o=Gr(s.semver,i.semver,t),o>0)return null;if(o===0&&(s.operator!==">="||i.operator!=="<="))return null}for(let m of n){if(s&&!Te(m,String(s),t)||i&&!Te(m,String(i),t))return null;for(let w of r)if(!Te(m,String(w),t))return!1;return!0}let a,c,u,l,f=i&&!t.includePrerelease&&i.semver.prerelease.length?i.semver:!1,g=s&&!t.includePrerelease&&s.semver.prerelease.length?s.semver:!1;f&&f.prerelease.length===1&&i.operator==="<"&&f.prerelease[0]===0&&(f=!1);for(let m of r){if(l=l||m.operator===">"||m.operator===">=",u=u||m.operator==="<"||m.operator==="<=",s){if(g&&m.semver.prerelease&&m.semver.prerelease.length&&m.semver.major===g.major&&m.semver.minor===g.minor&&m.semver.patch===g.patch&&(g=!1),m.operator===">"||m.operator===">="){if(a=ri(s,m,t),a===m&&a!==s)return!1}else if(s.operator===">="&&!Te(s.semver,String(m),t))return!1}if(i){if(f&&m.semver.prerelease&&m.semver.prerelease.length&&m.semver.major===f.major&&m.semver.minor===f.minor&&m.semver.patch===f.patch&&(f=!1),m.operator==="<"||m.operator==="<="){if(c=ti(i,m,t),c===m&&c!==i)return!1}else if(i.operator==="<="&&!Te(i.semver,String(m),t))return!1}if(!m.operator&&(i||s)&&o!==0)return!1}return!(s&&u&&!i&&o!==0||i&&l&&!s&&o!==0||g||f)},ri=(e,r,t)=>{if(!e)return r;let n=Gr(e.semver,r.semver,t);return n>0?e:n<0||r.operator===">"&&e.operator===">="?r:e},ti=(e,r,t)=>{if(!e)return r;let n=Gr(e.semver,r.semver,t);return n<0?e:n>0||r.operator==="<"&&e.operator==="<="?r:e};ni.exports=xu});var Ze=h((rd,ai)=>{var kr=oe(),ii=Ee(),qu=A(),oi=Ir(),_u=X(),ju=Rn(),Du=$n(),Pu=Ln(),Cu=_n(),Vu=Dn(),Bu=Cn(),Gu=Bn(),ku=kn(),Fu=q(),Uu=Mn(),Ku=Xn(),Mu=Me(),Hu=zn(),Xu=Zn(),Wu=ye(),Yu=He(),Ju=Rr(),zu=Ar(),Qu=Xe(),Zu=We(),ef=$r(),rf=cs(),tf=we(),nf=_(),sf=Ie(),of=Ls(),af=qs(),cf=js(),uf=Cs(),ff=Bs(),lf=Qe(),hf=Ms(),pf=Xs(),df=Js(),mf=Qs(),Ef=si();ai.exports={parse:_u,valid:ju,clean:Du,inc:Pu,diff:Cu,major:Vu,minor:Bu,patch:Gu,prerelease:ku,compare:Fu,rcompare:Uu,compareLoose:Ku,compareBuild:Mu,sort:Hu,rsort:Xu,gt:Wu,lt:Yu,eq:Ju,neq:zu,gte:Qu,lte:Zu,cmp:ef,coerce:rf,Comparator:tf,Range:nf,satisfies:sf,toComparators:of,maxSatisfying:af,minSatisfying:cf,minVersion:uf,validRange:ff,outside:lf,gtr:hf,ltr:pf,intersects:df,simplifyRange:mf,subset:Ef,SemVer:qu,re:kr.re,src:kr.src,tokens:kr.t,SEMVER_SPEC_VERSION:ii.SEMVER_SPEC_VERSION,RELEASE_TYPES:ii.RELEASE_TYPES,compareIdentifiers:oi.compareIdentifiers,rcompareIdentifiers:oi.rcompareIdentifiers}});var ui=h((td,ci)=>{var gf=Ze();ci.exports=gf.satisfies(process.version,">=15.7.0")});var li=h((nd,fi)=>{var yf=Ze();fi.exports=yf.satisfies(process.version,">=16.9.0")});var Fr=h((sd,hi)=>{var vf=ui(),Sf=li(),wf={ec:["ES256","ES384","ES512"],rsa:["RS256","PS256","RS384","PS384","RS512","PS512"],"rsa-pss":["PS256","PS384","PS512"]},bf={ES256:"prime256v1",ES384:"secp384r1",ES512:"secp521r1"};hi.exports=function(e,r){if(!e||!r)return;let t=r.asymmetricKeyType;if(!t)return;let n=wf[t];if(!n)throw new Error(`Unknown key type "${t}".`);if(!n.includes(e))throw new Error(`"alg" parameter for "${t}" key type must be one of: ${n.join(", ")}.`);if(vf)switch(t){case"ec":let s=r.asymmetricKeyDetails.namedCurve,i=bf[e];if(s!==i)throw new Error(`"alg" parameter "${e}" requires curve "${i}".`);break;case"rsa-pss":if(Sf){let o=parseInt(e.slice(-3),10),{hashAlgorithm:a,mgf1HashAlgorithm:c,saltLength:u}=r.asymmetricKeyDetails;if(a!==`sha${o}`||c!==a)throw new Error(`Invalid key for this operation, its RSA-PSS parameters do not meet the requirements of "alg" ${e}.`);if(u!==void 0&&u>o>>3)throw new Error(`Invalid key for this operation, its RSA-PSS parameter saltLength does not meet the requirements of "alg" ${e}.`)}break}}});var Ur=h((id,pi)=>{var If=Ze();pi.exports=If.satisfies(process.version,"^6.12.0 || >=8.0.0")});var Ei=h((od,mi)=>{var v=me(),Tf=yr(),di=vr(),Rf=gr(),Af=Sr(),$f=Fr(),Nf=Ur(),xf=Ce(),{KeyObject:Lf,createSecretKey:Of,createPublicKey:qf}=require("crypto"),Kr=["RS256","RS384","RS512"],_f=["ES256","ES384","ES512"],Mr=["RS256","RS384","RS512"],jf=["HS256","HS384","HS512"];Nf&&(Kr.splice(Kr.length,0,"PS256","PS384","PS512"),Mr.splice(Mr.length,0,"PS256","PS384","PS512"));mi.exports=function(e,r,t,n){typeof t=="function"&&!n&&(n=t,t={}),t||(t={}),t=Object.assign({},t);let s;if(n?s=n:s=function(l,f){if(l)throw l;return f},t.clockTimestamp&&typeof t.clockTimestamp!="number")return s(new v("clockTimestamp must be a number"));if(t.nonce!==void 0&&(typeof t.nonce!="string"||t.nonce.trim()===""))return s(new v("nonce must be a non-empty string"));if(t.allowInvalidAsymmetricKeyTypes!==void 0&&typeof t.allowInvalidAsymmetricKeyTypes!="boolean")return s(new v("allowInvalidAsymmetricKeyTypes must be a boolean"));let i=t.clockTimestamp||Math.floor(Date.now()/1e3);if(!e)return s(new v("jwt must be provided"));if(typeof e!="string")return s(new v("jwt must be a string"));let o=e.split(".");if(o.length!==3)return s(new v("jwt malformed"));let a;try{a=Rf(e,{complete:!0})}catch(l){return s(l)}if(!a)return s(new v("invalid token"));let c=a.header,u;if(typeof r=="function"){if(!n)return s(new v("verify must be called asynchronous if secret or public key is provided as a callback"));u=r}else u=function(l,f){return f(null,r)};return u(c,function(l,f){if(l)return s(new v("error in secret or public key callback: "+l.message));let g=o[2].trim()!=="";if(!g&&f)return s(new v("jwt signature is required"));if(g&&!f)return s(new v("secret or public key must be provided"));if(!g&&!t.algorithms)return s(new v('please specify "none" in "algorithms" to verify unsigned tokens'));if(f!=null&&!(f instanceof Lf))try{f=qf(f)}catch(x){try{f=Of(typeof f=="string"?Buffer.from(f):f)}catch(ro){return s(new v("secretOrPublicKey is not valid key material"))}}if(t.algorithms||(f.type==="secret"?t.algorithms=jf:["rsa","rsa-pss"].includes(f.asymmetricKeyType)?t.algorithms=Mr:f.asymmetricKeyType==="ec"?t.algorithms=_f:t.algorithms=Kr),t.algorithms.indexOf(a.header.alg)===-1)return s(new v("invalid algorithm"));if(c.alg.startsWith("HS")&&f.type!=="secret")return s(new v(`secretOrPublicKey must be a symmetric key when using ${c.alg}`));if(/^(?:RS|PS|ES)/.test(c.alg)&&f.type!=="public")return s(new v(`secretOrPublicKey must be an asymmetric key when using ${c.alg}`));if(!t.allowInvalidAsymmetricKeyTypes)try{$f(c.alg,f)}catch(x){return s(x)}let m;try{m=xf.verify(e,a.header.alg,f)}catch(x){return s(x)}if(!m)return s(new v("invalid signature"));let w=a.payload;if(typeof w.nbf!="undefined"&&!t.ignoreNotBefore){if(typeof w.nbf!="number")return s(new v("invalid nbf value"));if(w.nbf>i+(t.clockTolerance||0))return s(new Tf("jwt not active",new Date(w.nbf*1e3)))}if(typeof w.exp!="undefined"&&!t.ignoreExpiration){if(typeof w.exp!="number")return s(new v("invalid exp value"));if(i>=w.exp+(t.clockTolerance||0))return s(new di("jwt expired",new Date(w.exp*1e3)))}if(t.audience){let x=Array.isArray(t.audience)?t.audience:[t.audience];if(!(Array.isArray(w.aud)?w.aud:[w.aud]).some(function(Zr){return x.some(function(nr){return nr instanceof RegExp?nr.test(Zr):nr===Zr})}))return s(new v("jwt audience invalid. expected: "+x.join(" or ")))}if(t.issuer&&(typeof t.issuer=="string"&&w.iss!==t.issuer||Array.isArray(t.issuer)&&t.issuer.indexOf(w.iss)===-1))return s(new v("jwt issuer invalid. expected: "+t.issuer));if(t.subject&&w.sub!==t.subject)return s(new v("jwt subject invalid. expected: "+t.subject));if(t.jwtid&&w.jti!==t.jwtid)return s(new v("jwt jwtid invalid. expected: "+t.jwtid));if(t.nonce&&w.nonce!==t.nonce)return s(new v("jwt nonce invalid. expected: "+t.nonce));if(t.maxAge){if(typeof w.iat!="number")return s(new v("iat required when maxAge is specified"));let x=Af(t.maxAge,w.iat);if(typeof x=="undefined")return s(new v('"maxAge" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'));if(i>=x+(t.clockTolerance||0))return s(new di("maxAge exceeded",new Date(x*1e3)))}if(t.complete===!0){let x=a.signature;return s(null,{header:c,payload:w,signature:x})}return s(null,w)})}});var bi=h((ad,wi)=>{var gi=1/0,vi=9007199254740991,Df=17976931348623157e292,yi=0/0,Pf="[object Arguments]",Cf="[object Function]",Vf="[object GeneratorFunction]",Bf="[object String]",Gf="[object Symbol]",kf=/^\s+|\s+$/g,Ff=/^[-+]0x[0-9a-f]+$/i,Uf=/^0b[01]+$/i,Kf=/^0o[0-7]+$/i,Mf=/^(?:0|[1-9]\d*)$/,Hf=parseInt;function Xf(e,r){for(var t=-1,n=e?e.length:0,s=Array(n);++t<n;)s[t]=r(e[t],t,e);return s}function Wf(e,r,t,n){for(var s=e.length,i=t+(n?1:-1);n?i--:++i<s;)if(r(e[i],i,e))return i;return-1}function Yf(e,r,t){if(r!==r)return Wf(e,Jf,t);for(var n=t-1,s=e.length;++n<s;)if(e[n]===r)return n;return-1}function Jf(e){return e!==e}function zf(e,r){for(var t=-1,n=Array(e);++t<e;)n[t]=r(t);return n}function Qf(e,r){return Xf(r,function(t){return e[t]})}function Zf(e,r){return function(t){return e(r(t))}}var er=Object.prototype,Xr=er.hasOwnProperty,rr=er.toString,el=er.propertyIsEnumerable,rl=Zf(Object.keys,Object),tl=Math.max;function nl(e,r){var t=Si(e)||cl(e)?zf(e.length,String):[],n=t.length,s=!!n;for(var i in e)(r||Xr.call(e,i))&&!(s&&(i=="length"||il(i,n)))&&t.push(i);return t}function sl(e){if(!ol(e))return rl(e);var r=[];for(var t in Object(e))Xr.call(e,t)&&t!="constructor"&&r.push(t);return r}function il(e,r){return r=r==null?vi:r,!!r&&(typeof e=="number"||Mf.test(e))&&e>-1&&e%1==0&&e<r}function ol(e){var r=e&&e.constructor,t=typeof r=="function"&&r.prototype||er;return e===t}function al(e,r,t,n){e=Wr(e)?e:yl(e),t=t&&!n?ml(t):0;var s=e.length;return t<0&&(t=tl(s+t,0)),hl(e)?t<=s&&e.indexOf(r,t)>-1:!!s&&Yf(e,r,t)>-1}function cl(e){return ul(e)&&Xr.call(e,"callee")&&(!el.call(e,"callee")||rr.call(e)==Pf)}var Si=Array.isArray;function Wr(e){return e!=null&&ll(e.length)&&!fl(e)}function ul(e){return Yr(e)&&Wr(e)}function fl(e){var r=Hr(e)?rr.call(e):"";return r==Cf||r==Vf}function ll(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=vi}function Hr(e){var r=typeof e;return!!e&&(r=="object"||r=="function")}function Yr(e){return!!e&&typeof e=="object"}function hl(e){return typeof e=="string"||!Si(e)&&Yr(e)&&rr.call(e)==Bf}function pl(e){return typeof e=="symbol"||Yr(e)&&rr.call(e)==Gf}function dl(e){if(!e)return e===0?e:0;if(e=El(e),e===gi||e===-gi){var r=e<0?-1:1;return r*Df}return e===e?e:0}function ml(e){var r=dl(e),t=r%1;return r===r?t?r-t:r:0}function El(e){if(typeof e=="number")return e;if(pl(e))return yi;if(Hr(e)){var r=typeof e.valueOf=="function"?e.valueOf():e;e=Hr(r)?r+"":r}if(typeof e!="string")return e===0?e:+e;e=e.replace(kf,"");var t=Uf.test(e);return t||Kf.test(e)?Hf(e.slice(2),t?2:8):Ff.test(e)?yi:+e}function gl(e){return Wr(e)?nl(e):sl(e)}function yl(e){return e?Qf(e,gl(e)):[]}wi.exports=al});var Ti=h((cd,Ii)=>{var vl="[object Boolean]",Sl=Object.prototype,wl=Sl.toString;function bl(e){return e===!0||e===!1||Il(e)&&wl.call(e)==vl}function Il(e){return!!e&&typeof e=="object"}Ii.exports=bl});var xi=h((ud,Ni)=>{var Ri=1/0,Tl=17976931348623157e292,Ai=0/0,Rl="[object Symbol]",Al=/^\s+|\s+$/g,$l=/^[-+]0x[0-9a-f]+$/i,Nl=/^0b[01]+$/i,xl=/^0o[0-7]+$/i,Ll=parseInt,Ol=Object.prototype,ql=Ol.toString;function _l(e){return typeof e=="number"&&e==Cl(e)}function $i(e){var r=typeof e;return!!e&&(r=="object"||r=="function")}function jl(e){return!!e&&typeof e=="object"}function Dl(e){return typeof e=="symbol"||jl(e)&&ql.call(e)==Rl}function Pl(e){if(!e)return e===0?e:0;if(e=Vl(e),e===Ri||e===-Ri){var r=e<0?-1:1;return r*Tl}return e===e?e:0}function Cl(e){var r=Pl(e),t=r%1;return r===r?t?r-t:r:0}function Vl(e){if(typeof e=="number")return e;if(Dl(e))return Ai;if($i(e)){var r=typeof e.valueOf=="function"?e.valueOf():e;e=$i(r)?r+"":r}if(typeof e!="string")return e===0?e:+e;e=e.replace(Al,"");var t=Nl.test(e);return t||xl.test(e)?Ll(e.slice(2),t?2:8):$l.test(e)?Ai:+e}Ni.exports=_l});var Oi=h((fd,Li)=>{var Bl="[object Number]",Gl=Object.prototype,kl=Gl.toString;function Fl(e){return!!e&&typeof e=="object"}function Ul(e){return typeof e=="number"||Fl(e)&&kl.call(e)==Bl}Li.exports=Ul});var Di=h((ld,ji)=>{var Kl="[object Object]";function Ml(e){var r=!1;if(e!=null&&typeof e.toString!="function")try{r=!!(e+"")}catch(t){}return r}function Hl(e,r){return function(t){return e(r(t))}}var Xl=Function.prototype,qi=Object.prototype,_i=Xl.toString,Wl=qi.hasOwnProperty,Yl=_i.call(Object),Jl=qi.toString,zl=Hl(Object.getPrototypeOf,Object);function Ql(e){return!!e&&typeof e=="object"}function Zl(e){if(!Ql(e)||Jl.call(e)!=Kl||Ml(e))return!1;var r=zl(e);if(r===null)return!0;var t=Wl.call(r,"constructor")&&r.constructor;return typeof t=="function"&&t instanceof t&&_i.call(t)==Yl}ji.exports=Zl});var Ci=h((hd,Pi)=>{var eh="[object String]",rh=Object.prototype,th=rh.toString,nh=Array.isArray;function sh(e){return!!e&&typeof e=="object"}function ih(e){return typeof e=="string"||!nh(e)&&sh(e)&&th.call(e)==eh}Pi.exports=ih});var Fi=h((pd,ki)=>{var oh="Expected a function",Vi=1/0,ah=17976931348623157e292,Bi=0/0,ch="[object Symbol]",uh=/^\s+|\s+$/g,fh=/^[-+]0x[0-9a-f]+$/i,lh=/^0b[01]+$/i,hh=/^0o[0-7]+$/i,ph=parseInt,dh=Object.prototype,mh=dh.toString;function Eh(e,r){var t;if(typeof r!="function")throw new TypeError(oh);return e=wh(e),function(){return--e>0&&(t=r.apply(this,arguments)),e<=1&&(r=void 0),t}}function gh(e){return Eh(2,e)}function Gi(e){var r=typeof e;return!!e&&(r=="object"||r=="function")}function yh(e){return!!e&&typeof e=="object"}function vh(e){return typeof e=="symbol"||yh(e)&&mh.call(e)==ch}function Sh(e){if(!e)return e===0?e:0;if(e=bh(e),e===Vi||e===-Vi){var r=e<0?-1:1;return r*ah}return e===e?e:0}function wh(e){var r=Sh(e),t=r%1;return r===r?t?r-t:r:0}function bh(e){if(typeof e=="number")return e;if(vh(e))return Bi;if(Gi(e)){var r=typeof e.valueOf=="function"?e.valueOf():e;e=Gi(r)?r+"":r}if(typeof e!="string")return e===0?e:+e;e=e.replace(uh,"");var t=lh.test(e);return t||hh.test(e)?ph(e.slice(2),t?2:8):fh.test(e)?Bi:+e}ki.exports=gh});var zi=h((dd,Ji)=>{var Ui=Sr(),Ih=Ur(),Th=Fr(),Ki=Ce(),Rh=bi(),tr=Ti(),Mi=xi(),Jr=Oi(),Xi=Di(),M=Ci(),Ah=Fi(),{KeyObject:$h,createSecretKey:Nh,createPrivateKey:xh}=require("crypto"),Wi=["RS256","RS384","RS512","ES256","ES384","ES512","HS256","HS384","HS512","none"];Ih&&Wi.splice(3,0,"PS256","PS384","PS512");var Lh={expiresIn:{isValid:function(e){return Mi(e)||M(e)&&e},message:'"expiresIn" should be a number of seconds or string representing a timespan'},notBefore:{isValid:function(e){return Mi(e)||M(e)&&e},message:'"notBefore" should be a number of seconds or string representing a timespan'},audience:{isValid:function(e){return M(e)||Array.isArray(e)},message:'"audience" must be a string or array'},algorithm:{isValid:Rh.bind(null,Wi),message:'"algorithm" must be a valid string enum value'},header:{isValid:Xi,message:'"header" must be an object'},encoding:{isValid:M,message:'"encoding" must be a string'},issuer:{isValid:M,message:'"issuer" must be a string'},subject:{isValid:M,message:'"subject" must be a string'},jwtid:{isValid:M,message:'"jwtid" must be a string'},noTimestamp:{isValid:tr,message:'"noTimestamp" must be a boolean'},keyid:{isValid:M,message:'"keyid" must be a string'},mutatePayload:{isValid:tr,message:'"mutatePayload" must be a boolean'},allowInsecureKeySizes:{isValid:tr,message:'"allowInsecureKeySizes" must be a boolean'},allowInvalidAsymmetricKeyTypes:{isValid:tr,message:'"allowInvalidAsymmetricKeyTypes" must be a boolean'}},Oh={iat:{isValid:Jr,message:'"iat" should be a number of seconds'},exp:{isValid:Jr,message:'"exp" should be a number of seconds'},nbf:{isValid:Jr,message:'"nbf" should be a number of seconds'}};function Yi(e,r,t,n){if(!Xi(t))throw new Error('Expected "'+n+'" to be a plain object.');Object.keys(t).forEach(function(s){let i=e[s];if(!i){if(!r)throw new Error('"'+s+'" is not allowed in "'+n+'"');return}if(!i.isValid(t[s]))throw new Error(i.message)})}function qh(e){return Yi(Lh,!1,e,"options")}function _h(e){return Yi(Oh,!0,e,"payload")}var Hi={audience:"aud",issuer:"iss",subject:"sub",jwtid:"jti"},jh=["expiresIn","notBefore","noTimestamp","audience","issuer","subject","jwtid"];Ji.exports=function(e,r,t,n){typeof t=="function"?(n=t,t={}):t=t||{};let s=typeof e=="object"&&!Buffer.isBuffer(e),i=Object.assign({alg:t.algorithm||"HS256",typ:s?"JWT":void 0,kid:t.keyid},t.header);function o(u){if(n)return n(u);throw u}if(!r&&t.algorithm!=="none")return o(new Error("secretOrPrivateKey must have a value"));if(r!=null&&!(r instanceof $h))try{r=xh(r)}catch(u){try{r=Nh(typeof r=="string"?Buffer.from(r):r)}catch(l){return o(new Error("secretOrPrivateKey is not valid key material"))}}if(i.alg.startsWith("HS")&&r.type!=="secret")return o(new Error(`secretOrPrivateKey must be a symmetric key when using ${i.alg}`));if(/^(?:RS|PS|ES)/.test(i.alg)){if(r.type!=="private")return o(new Error(`secretOrPrivateKey must be an asymmetric key when using ${i.alg}`));if(!t.allowInsecureKeySizes&&!i.alg.startsWith("ES")&&r.asymmetricKeyDetails!==void 0&&r.asymmetricKeyDetails.modulusLength<2048)return o(new Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${i.alg}`))}if(typeof e=="undefined")return o(new Error("payload is required"));if(s){try{_h(e)}catch(u){return o(u)}t.mutatePayload||(e=Object.assign({},e))}else{let u=jh.filter(function(l){return typeof t[l]!="undefined"});if(u.length>0)return o(new Error("invalid "+u.join(",")+" option for "+typeof e+" payload"))}if(typeof e.exp!="undefined"&&typeof t.expiresIn!="undefined")return o(new Error('Bad "options.expiresIn" option the payload already has an "exp" property.'));if(typeof e.nbf!="undefined"&&typeof t.notBefore!="undefined")return o(new Error('Bad "options.notBefore" option the payload already has an "nbf" property.'));try{qh(t)}catch(u){return o(u)}if(!t.allowInvalidAsymmetricKeyTypes)try{Th(i.alg,r)}catch(u){return o(u)}let a=e.iat||Math.floor(Date.now()/1e3);if(t.noTimestamp?delete e.iat:s&&(e.iat=a),typeof t.notBefore!="undefined"){try{e.nbf=Ui(t.notBefore,a)}catch(u){return o(u)}if(typeof e.nbf=="undefined")return o(new Error('"notBefore" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'))}if(typeof t.expiresIn!="undefined"&&typeof e=="object"){try{e.exp=Ui(t.expiresIn,a)}catch(u){return o(u)}if(typeof e.exp=="undefined")return o(new Error('"expiresIn" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'))}Object.keys(Hi).forEach(function(u){let l=Hi[u];if(typeof t[u]!="undefined"){if(typeof e[l]!="undefined")return o(new Error('Bad "options.'+u+'" option. The payload already has an "'+l+'" property.'));e[l]=t[u]}});let c=t.encoding||"utf8";if(typeof n=="function")n=n&&Ah(n),Ki.createSign({header:i,privateKey:r,payload:e,encoding:c}).once("error",n).once("done",function(u){if(!t.allowInsecureKeySizes&&/^(?:RS|PS)/.test(i.alg)&&u.length<256)return n(new Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${i.alg}`));n(null,u)});else{let u=Ki.sign({header:i,payload:e,secret:r,encoding:c});if(!t.allowInsecureKeySizes&&/^(?:RS|PS)/.test(i.alg)&&u.length<256)throw new Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${i.alg}`);return u}}});var Zi=h((md,Qi)=>{Qi.exports={decode:gr(),verify:Ei(),sign:zi(),JsonWebTokenError:me(),NotBeforeError:yr(),TokenExpiredError:vr()}});var Ph={};uo(Ph,{default:()=>Dh,linksService:()=>C});module.exports=fo(Ph);var lt=sr(ft());lt.config();var Re=process.env.ACCESS_ID_TOKEN,Ae=process.env.SECRET_TOKEN,$e=process.env.JWT_SECRET,kh=process.env.EXPIRES_IN,ht=process.env.SQS_URL,Fh=process.env.REFRESH_TOKEN_SECRET;var U=sr(require("aws-sdk"));var pt=new U.SQS({apiVersion:"2012-11-05",region:"us-west-1",credentials:{accessKeyId:Re,secretAccessKey:Ae}});U.config.update({accessKeyId:Re,secretAccessKey:Ae,region:"us-west-1"});var Mh=new U.SES,L=new U.DynamoDB.DocumentClient({region:"localhost",credentials:{accessKeyId:Re,secretAccessKey:Ae},endpoint:"http://localhost:8000/"}),z={scan(e){return b(this,null,function*(){let r={TableName:e},t=yield L.scan(r).promise();if(!t||!t.Items)throw Error(`There was an error scanning the table ${e}`);return t.Items})},query(e,r,t){return b(this,null,function*(){let n={TableName:t,KeyConditionExpression:"#k = :v",ExpressionAttributeNames:{"#k":e},ExpressionAttributeValues:{":v":r}},s=yield L.query(n).promise();if(!s||!s.Items)throw Error(`There was an error querying the table ${t}`);return s.Items})},update(e,r,t,n,s){return b(this,null,function*(){let i={TableName:s,Key:{[e]:r},ExpressionAttributeNames:{"#k":t},ExpressionAttributeValues:{":v":n},UpdateExpression:"SET #k = :v",ReturnValues:"ALL_NEW"},o=yield L.update(i).promise();if(!o)throw Error(`There was an error updating the item in table ${s}`);return o.Attributes})},get(e,r,t){return b(this,null,function*(){let n={TableName:t,Key:{[e]:r}},s=yield L.get(n).promise();return console.log(s,"data"),s.Item?s.Item:{result:"No item found"}})},delete(e,r,t){return b(this,null,function*(){let n={TableName:t,Key:{[e]:r}};if(!(yield L.delete(n).promise()))throw Error(`There was an error deleting ${r} from ${t}`);return{result:"Successfully deleted"}})},write(e,r){return b(this,null,function*(){let t={TableName:r,Item:e};return console.log({data:e},"params"),yield L.put(t).promise(),e})}};var T={_DefineResponse(e=502,r={}){return{headers:{"Content-Type":"application/json","Access-Control-Allow-Methods":"*","Access-Control-Allow-Origin":"*"},statusCode:e,body:JSON.stringify(r)}},_Redirect(e=302,r={}){return{headers:{"Content-Type":"application/json","Access-Control-Allow-Methods":"*","Access-Control-Allow-Origin":"*",Location:r},statusCode:e,body:""}},_200(e={}){return this._DefineResponse(200,e)},_204(e={}){return this._DefineResponse(204,e)},_400(e={}){return this._DefineResponse(400,e)},_404(e={}){return this._DefineResponse(404,e)},_401(e={}){return this._DefineResponse(401,e)},_201(e={}){return this._DefineResponse(201,e)},_302(e={}){return this._DefineResponse(302,e)},_500(e={}){return this._DefineResponse(500,e)}};var fe=sr(Zi());function zr(e){let r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t="";for(let n=0;n<e;n++)t+=r.charAt(Math.floor(Math.random()*r.length));return t}var C={createLink:e=>b(void 0,null,function*(){try{yield L.put({TableName:"links-table",Item:e}).promise()}catch(r){throw console.error("\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0441\u043E\u0437\u0434\u0430\u043D\u0438\u0438 \u0441\u0441\u044B\u043B\u043A\u0438:",r),r}}),getLinksById:e=>b(void 0,null,function*(){let r={TableName:"links-table"},t=yield L.scan(r).promise();console.log(t),console.log(t.Items);let n=t.Items.find(s=>s.id===e);return console.log(n),n}),updateLink:(e,r,t,n)=>b(void 0,null,function*(){let s={TableName:"links-table",Key:{userId:r,id:e},UpdateExpression:"set #attr = :value",ExpressionAttributeNames:{"#attr":t},ExpressionAttributeValues:{":value":n},ReturnValues:"UPDATED_NEW"};return yield L.update(s).promise()}),updateMany:e=>b(void 0,null,function*(){console.log({link:e});let r=Object.keys(e).filter(o=>o!=="userId"&&o!=="id"),t=r.map(o=>`#${o} = :${o}`),n=r.reduce((o,a)=>(o[`#${a}`]=a,o),{}),s=r.reduce((o,a)=>(o[`:${a}`]=e[a],o),{}),i={TableName:"links-table",Key:{id:e.id,userId:e.userId},UpdateExpression:`SET ${t.join(", ")}`,ExpressionAttributeNames:n,ExpressionAttributeValues:s,ReturnValues:"UPDATED_NEW"};yield L.update(i).promise()}),deactivateLink:(e,r)=>b(void 0,null,function*(){let t={TableName:"links-table",Key:{userId:r,id:e},UpdateExpression:"set #attr = :value",ExpressionAttributeNames:{"#attr":"active"},ExpressionAttributeValues:{":value":!1},ReturnValues:"UPDATED_NEW"};yield L.update(t).promise()}),getAllByUserId:e=>b(void 0,null,function*(){let r={TableName:"links-table",FilterExpression:"#userId = :userIdValue",ExpressionAttributeNames:{"#userId":"userId"},ExpressionAttributeValues:{":userIdValue":e}},t=yield L.scan(r).promise();return console.log(t),t.Items}),delete(e,r,t){return b(this,null,function*(){let n={TableName:t,Key:{userId:e,id:r}};return yield L.delete(n).promise(),{status:!0}})}},eo="http://localhost:3000/links/",Qr=class{deleteLink(r,t,n){return b(this,null,function*(){let s=r.pathParameters.id;console.log(s);let i=r.headers.authorization.replace("Bearer ",""),o=yield fe.decode(i);o||n(null,T._401({message:"Unauthorized"}));let c=(yield z.get("email",o.email,"users-table")).id,u=yield C.getLinksById(s);if(!u)return n(null,T._404({message:"Link not found"}));if(u.userId!==c)return n(null,T._401({message:"Unauthorized"}));yield C.delete(u.userId,s,"links-table"),n(null,T._204({message:"Link deleted successfully"}))})}create(r,t,n){return b(this,null,function*(){t.callbackWaitsForEmptyEventLoop=!1;let s=r.headers.authorization.replace("Bearer ","");s||n(null,T._401({message:"Unauthorized empty token"}));let i=JSON.parse(r.body);if(!i.originalLink||!i.lifetime)return n(null,T._400({message:"Invalid data | originalLink, lifetime are required"}));let o=yield fe.verify(s,$e),a=zr(6),c;switch(i.lifetime){case"1h":c=60*4*1e3;break;case"one-time":c=0;break;case"1d":c=60*24*60*60*1e3;break;case"3d":c=3*24*60*60*1e3;break;case"7d":c=7*24*60*60*1e3;break;default:c=7*24*60*60*1e3}console.log(o);let u=yield z.get("email",o.email,"users-table");if(console.log(u),u.result)return n(null,T._400({message:"User not found"}));let l=u.id,f={id:`${a}`,fullLink:`${eo}${a}`,originalLink:i.originalLink,userId:l,expirationTime:Date.now()+c,active:!0,oneTime:i.lifetime==="one-time",visits:0};yield C.createLink(f),n(null,T._200({message:"Link created successfully",data:f}))})}deactivate(r,t){return b(this,null,function*(){let n=yield C.deactivateLink(r,t);console.log(n)})}redirectLink(r,t,n){return b(this,null,function*(){t.callbackWaitsForEmptyEventLoop=!1;let s=r.pathParameters.id,i=yield C.getLinksById(s);console.log({link:i}),(!i||!i.active||i.expirationTime<Date.now()&&!i.oneTime)&&(yield this.deactivate(s,i.userId),n(null,T._404({message:"Link deactivated or not found"}))),i.oneTime&&(yield this.deactivate(s,i.userId));let o=yield C.updateLink(s,i.userId,"visits",i.visits+1);n(null,T._Redirect(301,i.originalLink))})}deactivateExpired(r,t,n){return b(this,null,function*(){try{let i=(yield z.scan("links-table")).filter(o=>o.expirationTime<Date.now());for(let o of i){yield z.update("id",o.id,"active",{active:!1},"links-table");let a={QueueUrl:ht,MessageBody:`Your link is expired now link id:${o.id} , original link ${o.originalLink}`};yield pt.sendMessage(a).promise()}}catch(s){n(null,T._400({message:"Error"}))}})}list(r,t,n){return b(this,null,function*(){t.callbackWaitsForEmptyEventLoop=!1;let s=r.headers.authorization.replace("Bearer ","");s.length||n(null,T._401({message:"Unauthorized empty token"}));let i=fe.verify(s,$e),a=(yield C.getAllByUserId(i.id)).map(c=>st(nt({},c),{visits:c.visits||0}));n(null,T._200({links:a}))})}update(r,t,n){return b(this,null,function*(){t.callbackWaitsForEmptyEventLoop=!1;let s=r.pathParameters.id,i=r.headers.authorization.replace("Bearer ","");i.length||n(null,T._401({message:"Unauthorized empty token"}));let o=fe.verify(i,$e),a=JSON.parse(r.body);if(!a.originalLink||!a.lifetime)return n(null,T._400({message:"Invalid data | originalLink, lifetime are required"}));let c=zr(6),u;switch(a.lifetime){case"30m":u=60*4*1e3;break;case"one-time":u=0;break;case"1d":u=60*24*60*60*1e3;break;case"3d":u=3*24*60*60*1e3;break;case"7d":u=7*24*60*60*1e3;break;default:u=7*24*60*60*1e3}let l=yield z.get("email",o.email,"users-table");if(l.result)return n(null,T._400({message:"User not found"}));let f=l.id,g={id:`${c}`,fullLink:`${eo}${c}`,originalLink:a.originalLink,userId:f,expirationTime:Date.now()+u,active:!0,oneTime:a.lifetime==="one-time",visits:0};yield C.delete(g.userId,s,"links-table"),yield C.updateMany(g),n(null,T._200({message:"Link updated successfully",data:g}))})}},Dh=new Qr;0&&(module.exports={linksService});
//# sourceMappingURL=links.service.js.map
