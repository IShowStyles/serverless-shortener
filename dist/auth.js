var io=Object.create;var Te=Object.defineProperty;var oo=Object.getOwnPropertyDescriptor;var ao=Object.getOwnPropertyNames;var co=Object.getPrototypeOf,uo=Object.prototype.hasOwnProperty;var l=(e,r)=>()=>(r||e((r={exports:{}}).exports,r),r.exports),fo=(e,r)=>{for(var t in r)Te(e,t,{get:r[t],enumerable:!0})},at=(e,r,t,n)=>{if(r&&typeof r=="object"||typeof r=="function")for(let s of ao(r))!uo.call(e,s)&&s!==t&&Te(e,s,{get:()=>r[s],enumerable:!(n=oo(r,s))||n.enumerable});return e};var Y=(e,r,t)=>(t=e!=null?io(co(e)):{},at(r||!e||!e.__esModule?Te(t,"default",{value:e,enumerable:!0}):t,e)),lo=e=>at(Te({},"__esModule",{value:!0}),e);var R=(e,r,t)=>new Promise((n,s)=>{var i=c=>{try{a(t.next(c))}catch(f){s(f)}},o=c=>{try{a(t.throw(c))}catch(f){s(f)}},a=c=>c.done?n(c.value):Promise.resolve(c.value).then(i,o);a((t=t.apply(e,r)).next())});var z=l((ar,ut)=>{var Ae=require("buffer"),P=Ae.Buffer;function ct(e,r){for(var t in e)r[t]=e[t]}P.from&&P.alloc&&P.allocUnsafe&&P.allocUnsafeSlow?ut.exports=Ae:(ct(Ae,ar),ar.Buffer=J);function J(e,r,t){return P(e,r,t)}ct(P,J);J.from=function(e,r,t){if(typeof e=="number")throw new TypeError("Argument must not be a number");return P(e,r,t)};J.alloc=function(e,r,t){if(typeof e!="number")throw new TypeError("Argument must be a number");var n=P(e);return r!==void 0?typeof t=="string"?n.fill(r,t):n.fill(r):n.fill(0),n};J.allocUnsafe=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return P(e)};J.allocUnsafeSlow=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return Ae.SlowBuffer(e)}});var cr=l((Kh,ft)=>{var xe=z().Buffer,ho=require("stream"),po=require("util");function $e(e){if(this.buffer=null,this.writable=!0,this.readable=!0,!e)return this.buffer=xe.alloc(0),this;if(typeof e.pipe=="function")return this.buffer=xe.alloc(0),e.pipe(this),this;if(e.length||typeof e=="object")return this.buffer=e,this.writable=!1,process.nextTick(function(){this.emit("end",e),this.readable=!1,this.emit("close")}.bind(this)),this;throw new TypeError("Unexpected data type ("+typeof e+")")}po.inherits($e,ho);$e.prototype.write=function(r){this.buffer=xe.concat([this.buffer,xe.from(r)]),this.emit("data",r)};$e.prototype.end=function(r){r&&this.write(r),this.emit("end",r),this.emit("close"),this.writable=!1,this.readable=!1};ft.exports=$e});var ht=l((Hh,lt)=>{"use strict";var le=require("buffer").Buffer,ur=require("buffer").SlowBuffer;lt.exports=Ne;function Ne(e,r){if(!le.isBuffer(e)||!le.isBuffer(r)||e.length!==r.length)return!1;for(var t=0,n=0;n<e.length;n++)t|=e[n]^r[n];return t===0}Ne.install=function(){le.prototype.equal=ur.prototype.equal=function(r){return Ne(this,r)}};var mo=le.prototype.equal,Eo=ur.prototype.equal;Ne.restore=function(){le.prototype.equal=mo,ur.prototype.equal=Eo}});var mt=l((Mh,pt)=>{"use strict";function fr(e){var r=(e/8|0)+(e%8===0?0:1);return r}var go={ES256:fr(256),ES384:fr(384),ES512:fr(521)};function yo(e){var r=go[e];if(r)return r;throw new Error('Unknown algorithm "'+e+'"')}pt.exports=yo});var wt=l((Xh,St)=>{"use strict";var Oe=z().Buffer,Et=mt(),Le=128,gt=0,vo=32,So=16,wo=2,yt=So|vo|gt<<6,qe=wo|gt<<6;function bo(e){return e.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function vt(e){if(Oe.isBuffer(e))return e;if(typeof e=="string")return Oe.from(e,"base64");throw new TypeError("ECDSA signature must be a Base64 string or a Buffer")}function Io(e,r){e=vt(e);var t=Et(r),n=t+1,s=e.length,i=0;if(e[i++]!==yt)throw new Error('Could not find expected "seq"');var o=e[i++];if(o===(Le|1)&&(o=e[i++]),s-i<o)throw new Error('"seq" specified length of "'+o+'", only "'+(s-i)+'" remaining');if(e[i++]!==qe)throw new Error('Could not find expected "int" for "r"');var a=e[i++];if(s-i-2<a)throw new Error('"r" specified length of "'+a+'", only "'+(s-i-2)+'" available');if(n<a)throw new Error('"r" specified length of "'+a+'", max of "'+n+'" is acceptable');var c=i;if(i+=a,e[i++]!==qe)throw new Error('Could not find expected "int" for "s"');var f=e[i++];if(s-i!==f)throw new Error('"s" specified length of "'+f+'", expected "'+(s-i)+'"');if(n<f)throw new Error('"s" specified length of "'+f+'", max of "'+n+'" is acceptable');var h=i;if(i+=f,i!==s)throw new Error('Expected to consume entire buffer, but "'+(s-i)+'" bytes remain');var u=t-a,y=t-f,d=Oe.allocUnsafe(u+a+y+f);for(i=0;i<u;++i)d[i]=0;e.copy(d,i,c+Math.max(-u,0),c+a),i=t;for(var w=i;i<w+y;++i)d[i]=0;return e.copy(d,i,h+Math.max(-y,0),h+f),d=d.toString("base64"),d=bo(d),d}function dt(e,r,t){for(var n=0;r+n<t&&e[r+n]===0;)++n;var s=e[r+n]>=Le;return s&&--n,n}function Ro(e,r){e=vt(e);var t=Et(r),n=e.length;if(n!==t*2)throw new TypeError('"'+r+'" signatures must be "'+t*2+'" bytes, saw "'+n+'"');var s=dt(e,0,t),i=dt(e,t,e.length),o=t-s,a=t-i,c=1+1+o+1+1+a,f=c<Le,h=Oe.allocUnsafe((f?2:3)+c),u=0;return h[u++]=yt,f?h[u++]=c:(h[u++]=Le|1,h[u++]=c&255),h[u++]=qe,h[u++]=o,s<0?(h[u++]=0,u+=e.copy(h,u,0,t)):u+=e.copy(h,u,s,t),h[u++]=qe,h[u++]=a,i<0?(h[u++]=0,e.copy(h,u,t)):e.copy(h,u,t+i),h}St.exports={derToJose:Io,joseToDer:Ro}});var pr=l((kh,Ot)=>{var To=ht(),Z=z().Buffer,D=require("crypto"),It=wt(),bt=require("util"),Ao=`"%s" is not a valid algorithm.
  Supported algorithms are:
  "HS256", "HS384", "HS512", "RS256", "RS384", "RS512", "PS256", "PS384", "PS512", "ES256", "ES384", "ES512" and "none".`,he="secret must be a string or buffer",Q="key must be a string or a buffer",xo="key must be a string, a buffer or an object",lr=typeof D.createPublicKey=="function";lr&&(Q+=" or a KeyObject",he+="or a KeyObject");function Rt(e){if(!Z.isBuffer(e)&&typeof e!="string"&&(!lr||typeof e!="object"||typeof e.type!="string"||typeof e.asymmetricKeyType!="string"||typeof e.export!="function"))throw _(Q)}function Tt(e){if(!Z.isBuffer(e)&&typeof e!="string"&&typeof e!="object")throw _(xo)}function $o(e){if(!Z.isBuffer(e)){if(typeof e=="string")return e;if(!lr||typeof e!="object"||e.type!=="secret"||typeof e.export!="function")throw _(he)}}function hr(e){return e.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function At(e){e=e.toString();var r=4-e.length%4;if(r!==4)for(var t=0;t<r;++t)e+="=";return e.replace(/\-/g,"+").replace(/_/g,"/")}function _(e){var r=[].slice.call(arguments,1),t=bt.format.bind(bt,e).apply(null,r);return new TypeError(t)}function No(e){return Z.isBuffer(e)||typeof e=="string"}function pe(e){return No(e)||(e=JSON.stringify(e)),e}function xt(e){return function(t,n){$o(n),t=pe(t);var s=D.createHmac("sha"+e,n),i=(s.update(t),s.digest("base64"));return hr(i)}}function Oo(e){return function(t,n,s){var i=xt(e)(t,s);return To(Z.from(n),Z.from(i))}}function $t(e){return function(t,n){Tt(n),t=pe(t);var s=D.createSign("RSA-SHA"+e),i=(s.update(t),s.sign(n,"base64"));return hr(i)}}function Nt(e){return function(t,n,s){Rt(s),t=pe(t),n=At(n);var i=D.createVerify("RSA-SHA"+e);return i.update(t),i.verify(s,n,"base64")}}function Lo(e){return function(t,n){Tt(n),t=pe(t);var s=D.createSign("RSA-SHA"+e),i=(s.update(t),s.sign({key:n,padding:D.constants.RSA_PKCS1_PSS_PADDING,saltLength:D.constants.RSA_PSS_SALTLEN_DIGEST},"base64"));return hr(i)}}function qo(e){return function(t,n,s){Rt(s),t=pe(t),n=At(n);var i=D.createVerify("RSA-SHA"+e);return i.update(t),i.verify({key:s,padding:D.constants.RSA_PKCS1_PSS_PADDING,saltLength:D.constants.RSA_PSS_SALTLEN_DIGEST},n,"base64")}}function _o(e){var r=$t(e);return function(){var n=r.apply(null,arguments);return n=It.derToJose(n,"ES"+e),n}}function jo(e){var r=Nt(e);return function(n,s,i){s=It.joseToDer(s,"ES"+e).toString("base64");var o=r(n,s,i);return o}}function Do(){return function(){return""}}function Po(){return function(r,t){return t===""}}Ot.exports=function(r){var t={hs:xt,rs:$t,ps:Lo,es:_o,none:Do},n={hs:Oo,rs:Nt,ps:qo,es:jo,none:Po},s=r.match(/^(RS|PS|ES|HS)(256|384|512)$|^(none)$/i);if(!s)throw _(Ao,r);var i=(s[1]||s[3]).toLowerCase(),o=s[2];return{sign:t[i](o),verify:n[i](o)}}});var mr=l((Wh,Lt)=>{var Co=require("buffer").Buffer;Lt.exports=function(r){return typeof r=="string"?r:typeof r=="number"||Co.isBuffer(r)?r.toString():JSON.stringify(r)}});var Ct=l((Yh,Pt)=>{var Vo=z().Buffer,qt=cr(),Go=pr(),Bo=require("stream"),_t=mr(),dr=require("util");function jt(e,r){return Vo.from(e,r).toString("base64").replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Uo(e,r,t){t=t||"utf8";var n=jt(_t(e),"binary"),s=jt(_t(r),t);return dr.format("%s.%s",n,s)}function Dt(e){var r=e.header,t=e.payload,n=e.secret||e.privateKey,s=e.encoding,i=Go(r.alg),o=Uo(r,t,s),a=i.sign(o,n);return dr.format("%s.%s",o,a)}function _e(e){var r=e.secret||e.privateKey||e.key,t=new qt(r);this.readable=!0,this.header=e.header,this.encoding=e.encoding,this.secret=this.privateKey=this.key=t,this.payload=new qt(e.payload),this.secret.once("close",function(){!this.payload.writable&&this.readable&&this.sign()}.bind(this)),this.payload.once("close",function(){!this.secret.writable&&this.readable&&this.sign()}.bind(this))}dr.inherits(_e,Bo);_e.prototype.sign=function(){try{var r=Dt({header:this.header,payload:this.payload.buffer,secret:this.secret.buffer,encoding:this.encoding});return this.emit("done",r),this.emit("data",r),this.emit("end"),this.readable=!1,r}catch(t){this.readable=!1,this.emit("error",t),this.emit("close")}};_e.sign=Dt;Pt.exports=_e});var kt=l((Jh,Xt)=>{var Gt=z().Buffer,Vt=cr(),Fo=pr(),Ko=require("stream"),Bt=mr(),Ho=require("util"),Mo=/^[a-zA-Z0-9\-_]+?\.[a-zA-Z0-9\-_]+?\.([a-zA-Z0-9\-_]+)?$/;function Xo(e){return Object.prototype.toString.call(e)==="[object Object]"}function ko(e){if(Xo(e))return e;try{return JSON.parse(e)}catch(r){return}}function Ut(e){var r=e.split(".",1)[0];return ko(Gt.from(r,"base64").toString("binary"))}function Wo(e){return e.split(".",2).join(".")}function Ft(e){return e.split(".")[2]}function Yo(e,r){r=r||"utf8";var t=e.split(".")[1];return Gt.from(t,"base64").toString(r)}function Kt(e){return Mo.test(e)&&!!Ut(e)}function Ht(e,r,t){if(!r){var n=new Error("Missing algorithm parameter for jws.verify");throw n.code="MISSING_ALGORITHM",n}e=Bt(e);var s=Ft(e),i=Wo(e),o=Fo(r);return o.verify(i,s,t)}function Mt(e,r){if(r=r||{},e=Bt(e),!Kt(e))return null;var t=Ut(e);if(!t)return null;var n=Yo(e);return(t.typ==="JWT"||r.json)&&(n=JSON.parse(n,r.encoding)),{header:t,payload:n,signature:Ft(e)}}function ee(e){e=e||{};var r=e.secret||e.publicKey||e.key,t=new Vt(r);this.readable=!0,this.algorithm=e.algorithm,this.encoding=e.encoding,this.secret=this.publicKey=this.key=t,this.signature=new Vt(e.signature),this.secret.once("close",function(){!this.signature.writable&&this.readable&&this.verify()}.bind(this)),this.signature.once("close",function(){!this.secret.writable&&this.readable&&this.verify()}.bind(this))}Ho.inherits(ee,Ko);ee.prototype.verify=function(){try{var r=Ht(this.signature.buffer,this.algorithm,this.key.buffer),t=Mt(this.signature.buffer,this.encoding);return this.emit("done",r,t),this.emit("data",r),this.emit("end"),this.readable=!1,r}catch(n){this.readable=!1,this.emit("error",n),this.emit("close")}};ee.decode=Mt;ee.isValid=Kt;ee.verify=Ht;Xt.exports=ee});var De=l(U=>{var Wt=Ct(),je=kt(),Jo=["HS256","HS384","HS512","RS256","RS384","RS512","PS256","PS384","PS512","ES256","ES384","ES512"];U.ALGORITHMS=Jo;U.sign=Wt.sign;U.verify=je.verify;U.decode=je.decode;U.isValid=je.isValid;U.createSign=function(r){return new Wt(r)};U.createVerify=function(r){return new je(r)}});var Er=l((Qh,Yt)=>{var zo=De();Yt.exports=function(e,r){r=r||{};var t=zo.decode(e,r);if(!t)return null;var n=t.payload;if(typeof n=="string")try{var s=JSON.parse(n);s!==null&&typeof s=="object"&&(n=s)}catch(i){}return r.complete===!0?{header:t.header,payload:n,signature:t.signature}:n}});var me=l((Zh,Jt)=>{var Pe=function(e,r){Error.call(this,e),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.name="JsonWebTokenError",this.message=e,r&&(this.inner=r)};Pe.prototype=Object.create(Error.prototype);Pe.prototype.constructor=Pe;Jt.exports=Pe});var gr=l((ep,Qt)=>{var zt=me(),Ce=function(e,r){zt.call(this,e),this.name="NotBeforeError",this.date=r};Ce.prototype=Object.create(zt.prototype);Ce.prototype.constructor=Ce;Qt.exports=Ce});var yr=l((rp,en)=>{var Zt=me(),Ve=function(e,r){Zt.call(this,e),this.name="TokenExpiredError",this.expiredAt=r};Ve.prototype=Object.create(Zt.prototype);Ve.prototype.constructor=Ve;en.exports=Ve});var tn=l((tp,rn)=>{var re=1e3,te=re*60,ne=te*60,H=ne*24,Qo=H*7,Zo=H*365.25;rn.exports=function(e,r){r=r||{};var t=typeof e;if(t==="string"&&e.length>0)return ea(e);if(t==="number"&&isFinite(e))return r.long?ta(e):ra(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function ea(e){if(e=String(e),!(e.length>100)){var r=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(r){var t=parseFloat(r[1]),n=(r[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return t*Zo;case"weeks":case"week":case"w":return t*Qo;case"days":case"day":case"d":return t*H;case"hours":case"hour":case"hrs":case"hr":case"h":return t*ne;case"minutes":case"minute":case"mins":case"min":case"m":return t*te;case"seconds":case"second":case"secs":case"sec":case"s":return t*re;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return t;default:return}}}}function ra(e){var r=Math.abs(e);return r>=H?Math.round(e/H)+"d":r>=ne?Math.round(e/ne)+"h":r>=te?Math.round(e/te)+"m":r>=re?Math.round(e/re)+"s":e+"ms"}function ta(e){var r=Math.abs(e);return r>=H?Ge(e,r,H,"day"):r>=ne?Ge(e,r,ne,"hour"):r>=te?Ge(e,r,te,"minute"):r>=re?Ge(e,r,re,"second"):e+" ms"}function Ge(e,r,t,n){var s=r>=t*1.5;return Math.round(e/t)+" "+n+(s?"s":"")}});var vr=l((np,nn)=>{var na=tn();nn.exports=function(e,r){var t=r||Math.floor(Date.now()/1e3);if(typeof e=="string"){var n=na(e);return typeof n=="undefined"?void 0:Math.floor(t+n/1e3)}else return typeof e=="number"?t+e:void 0}});var de=l((sp,sn)=>{var sa="2.0.0",ia=Number.MAX_SAFE_INTEGER||9007199254740991,oa=16,aa=256-6,ca=["major","premajor","minor","preminor","patch","prepatch","prerelease"];sn.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:oa,MAX_SAFE_BUILD_LENGTH:aa,MAX_SAFE_INTEGER:ia,RELEASE_TYPES:ca,SEMVER_SPEC_VERSION:sa,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}});var Ee=l((ip,on)=>{var ua=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};on.exports=ua});var se=l((C,an)=>{var{MAX_SAFE_COMPONENT_LENGTH:Sr,MAX_SAFE_BUILD_LENGTH:fa,MAX_LENGTH:la}=de(),ha=Ee();C=an.exports={};var pa=C.re=[],ma=C.safeRe=[],p=C.src=[],m=C.t={},da=0,wr="[a-zA-Z0-9-]",Ea=[["\\s",1],["\\d",la],[wr,fa]],ga=e=>{for(let[r,t]of Ea)e=e.split(`${r}*`).join(`${r}{0,${t}}`).split(`${r}+`).join(`${r}{1,${t}}`);return e},E=(e,r,t)=>{let n=ga(r),s=da++;ha(e,s,r),m[e]=s,p[s]=r,pa[s]=new RegExp(r,t?"g":void 0),ma[s]=new RegExp(n,t?"g":void 0)};E("NUMERICIDENTIFIER","0|[1-9]\\d*");E("NUMERICIDENTIFIERLOOSE","\\d+");E("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${wr}*`);E("MAINVERSION",`(${p[m.NUMERICIDENTIFIER]})\\.(${p[m.NUMERICIDENTIFIER]})\\.(${p[m.NUMERICIDENTIFIER]})`);E("MAINVERSIONLOOSE",`(${p[m.NUMERICIDENTIFIERLOOSE]})\\.(${p[m.NUMERICIDENTIFIERLOOSE]})\\.(${p[m.NUMERICIDENTIFIERLOOSE]})`);E("PRERELEASEIDENTIFIER",`(?:${p[m.NUMERICIDENTIFIER]}|${p[m.NONNUMERICIDENTIFIER]})`);E("PRERELEASEIDENTIFIERLOOSE",`(?:${p[m.NUMERICIDENTIFIERLOOSE]}|${p[m.NONNUMERICIDENTIFIER]})`);E("PRERELEASE",`(?:-(${p[m.PRERELEASEIDENTIFIER]}(?:\\.${p[m.PRERELEASEIDENTIFIER]})*))`);E("PRERELEASELOOSE",`(?:-?(${p[m.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${p[m.PRERELEASEIDENTIFIERLOOSE]})*))`);E("BUILDIDENTIFIER",`${wr}+`);E("BUILD",`(?:\\+(${p[m.BUILDIDENTIFIER]}(?:\\.${p[m.BUILDIDENTIFIER]})*))`);E("FULLPLAIN",`v?${p[m.MAINVERSION]}${p[m.PRERELEASE]}?${p[m.BUILD]}?`);E("FULL",`^${p[m.FULLPLAIN]}$`);E("LOOSEPLAIN",`[v=\\s]*${p[m.MAINVERSIONLOOSE]}${p[m.PRERELEASELOOSE]}?${p[m.BUILD]}?`);E("LOOSE",`^${p[m.LOOSEPLAIN]}$`);E("GTLT","((?:<|>)?=?)");E("XRANGEIDENTIFIERLOOSE",`${p[m.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);E("XRANGEIDENTIFIER",`${p[m.NUMERICIDENTIFIER]}|x|X|\\*`);E("XRANGEPLAIN",`[v=\\s]*(${p[m.XRANGEIDENTIFIER]})(?:\\.(${p[m.XRANGEIDENTIFIER]})(?:\\.(${p[m.XRANGEIDENTIFIER]})(?:${p[m.PRERELEASE]})?${p[m.BUILD]}?)?)?`);E("XRANGEPLAINLOOSE",`[v=\\s]*(${p[m.XRANGEIDENTIFIERLOOSE]})(?:\\.(${p[m.XRANGEIDENTIFIERLOOSE]})(?:\\.(${p[m.XRANGEIDENTIFIERLOOSE]})(?:${p[m.PRERELEASELOOSE]})?${p[m.BUILD]}?)?)?`);E("XRANGE",`^${p[m.GTLT]}\\s*${p[m.XRANGEPLAIN]}$`);E("XRANGELOOSE",`^${p[m.GTLT]}\\s*${p[m.XRANGEPLAINLOOSE]}$`);E("COERCE",`(^|[^\\d])(\\d{1,${Sr}})(?:\\.(\\d{1,${Sr}}))?(?:\\.(\\d{1,${Sr}}))?(?:$|[^\\d])`);E("COERCERTL",p[m.COERCE],!0);E("LONETILDE","(?:~>?)");E("TILDETRIM",`(\\s*)${p[m.LONETILDE]}\\s+`,!0);C.tildeTrimReplace="$1~";E("TILDE",`^${p[m.LONETILDE]}${p[m.XRANGEPLAIN]}$`);E("TILDELOOSE",`^${p[m.LONETILDE]}${p[m.XRANGEPLAINLOOSE]}$`);E("LONECARET","(?:\\^)");E("CARETTRIM",`(\\s*)${p[m.LONECARET]}\\s+`,!0);C.caretTrimReplace="$1^";E("CARET",`^${p[m.LONECARET]}${p[m.XRANGEPLAIN]}$`);E("CARETLOOSE",`^${p[m.LONECARET]}${p[m.XRANGEPLAINLOOSE]}$`);E("COMPARATORLOOSE",`^${p[m.GTLT]}\\s*(${p[m.LOOSEPLAIN]})$|^$`);E("COMPARATOR",`^${p[m.GTLT]}\\s*(${p[m.FULLPLAIN]})$|^$`);E("COMPARATORTRIM",`(\\s*)${p[m.GTLT]}\\s*(${p[m.LOOSEPLAIN]}|${p[m.XRANGEPLAIN]})`,!0);C.comparatorTrimReplace="$1$2$3";E("HYPHENRANGE",`^\\s*(${p[m.XRANGEPLAIN]})\\s+-\\s+(${p[m.XRANGEPLAIN]})\\s*$`);E("HYPHENRANGELOOSE",`^\\s*(${p[m.XRANGEPLAINLOOSE]})\\s+-\\s+(${p[m.XRANGEPLAINLOOSE]})\\s*$`);E("STAR","(<|>)?=?\\s*\\*");E("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");E("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")});var Be=l((op,cn)=>{var ya=Object.freeze({loose:!0}),va=Object.freeze({}),Sa=e=>e?typeof e!="object"?ya:e:va;cn.exports=Sa});var br=l((ap,ln)=>{var un=/^[0-9]+$/,fn=(e,r)=>{let t=un.test(e),n=un.test(r);return t&&n&&(e=+e,r=+r),e===r?0:t&&!n?-1:n&&!t?1:e<r?-1:1},wa=(e,r)=>fn(r,e);ln.exports={compareIdentifiers:fn,rcompareIdentifiers:wa}});var A=l((cp,dn)=>{var Ue=Ee(),{MAX_LENGTH:hn,MAX_SAFE_INTEGER:Fe}=de(),{safeRe:pn,t:mn}=se(),ba=Be(),{compareIdentifiers:ie}=br(),Ir=class e{constructor(r,t){if(t=ba(t),r instanceof e){if(r.loose===!!t.loose&&r.includePrerelease===!!t.includePrerelease)return r;r=r.version}else if(typeof r!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof r}".`);if(r.length>hn)throw new TypeError(`version is longer than ${hn} characters`);Ue("SemVer",r,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;let n=r.trim().match(t.loose?pn[mn.LOOSE]:pn[mn.FULL]);if(!n)throw new TypeError(`Invalid Version: ${r}`);if(this.raw=r,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>Fe||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Fe||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Fe||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(s=>{if(/^[0-9]+$/.test(s)){let i=+s;if(i>=0&&i<Fe)return i}return s}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(r){if(Ue("SemVer.compare",this.version,this.options,r),!(r instanceof e)){if(typeof r=="string"&&r===this.version)return 0;r=new e(r,this.options)}return r.version===this.version?0:this.compareMain(r)||this.comparePre(r)}compareMain(r){return r instanceof e||(r=new e(r,this.options)),ie(this.major,r.major)||ie(this.minor,r.minor)||ie(this.patch,r.patch)}comparePre(r){if(r instanceof e||(r=new e(r,this.options)),this.prerelease.length&&!r.prerelease.length)return-1;if(!this.prerelease.length&&r.prerelease.length)return 1;if(!this.prerelease.length&&!r.prerelease.length)return 0;let t=0;do{let n=this.prerelease[t],s=r.prerelease[t];if(Ue("prerelease compare",t,n,s),n===void 0&&s===void 0)return 0;if(s===void 0)return 1;if(n===void 0)return-1;if(n===s)continue;return ie(n,s)}while(++t)}compareBuild(r){r instanceof e||(r=new e(r,this.options));let t=0;do{let n=this.build[t],s=r.build[t];if(Ue("prerelease compare",t,n,s),n===void 0&&s===void 0)return 0;if(s===void 0)return 1;if(n===void 0)return-1;if(n===s)continue;return ie(n,s)}while(++t)}inc(r,t,n){switch(r){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t,n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t,n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t,n),this.inc("pre",t,n);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",t,n),this.inc("pre",t,n);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{let s=Number(n)?1:0;if(!t&&n===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[s];else{let i=this.prerelease.length;for(;--i>=0;)typeof this.prerelease[i]=="number"&&(this.prerelease[i]++,i=-2);if(i===-1){if(t===this.prerelease.join(".")&&n===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(s)}}if(t){let i=[t,s];n===!1&&(i=[t]),ie(this.prerelease[0],t)===0?isNaN(this.prerelease[1])&&(this.prerelease=i):this.prerelease=i}break}default:throw new Error(`invalid increment argument: ${r}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};dn.exports=Ir});var M=l((up,gn)=>{var En=A(),Ia=(e,r,t=!1)=>{if(e instanceof En)return e;try{return new En(e,r)}catch(n){if(!t)return null;throw n}};gn.exports=Ia});var vn=l((fp,yn)=>{var Ra=M(),Ta=(e,r)=>{let t=Ra(e,r);return t?t.version:null};yn.exports=Ta});var wn=l((lp,Sn)=>{var Aa=M(),xa=(e,r)=>{let t=Aa(e.trim().replace(/^[=v]+/,""),r);return t?t.version:null};Sn.exports=xa});var Rn=l((hp,In)=>{var bn=A(),$a=(e,r,t,n,s)=>{typeof t=="string"&&(s=n,n=t,t=void 0);try{return new bn(e instanceof bn?e.version:e,t).inc(r,n,s).version}catch(i){return null}};In.exports=$a});var xn=l((pp,An)=>{var Tn=M(),Na=(e,r)=>{let t=Tn(e,null,!0),n=Tn(r,null,!0),s=t.compare(n);if(s===0)return null;let i=s>0,o=i?t:n,a=i?n:t,c=!!o.prerelease.length;if(!!a.prerelease.length&&!c)return!a.patch&&!a.minor?"major":o.patch?"patch":o.minor?"minor":"major";let h=c?"pre":"";return t.major!==n.major?h+"major":t.minor!==n.minor?h+"minor":t.patch!==n.patch?h+"patch":"prerelease"};An.exports=Na});var Nn=l((mp,$n)=>{var Oa=A(),La=(e,r)=>new Oa(e,r).major;$n.exports=La});var Ln=l((dp,On)=>{var qa=A(),_a=(e,r)=>new qa(e,r).minor;On.exports=_a});var _n=l((Ep,qn)=>{var ja=A(),Da=(e,r)=>new ja(e,r).patch;qn.exports=Da});var Dn=l((gp,jn)=>{var Pa=M(),Ca=(e,r)=>{let t=Pa(e,r);return t&&t.prerelease.length?t.prerelease:null};jn.exports=Ca});var L=l((yp,Cn)=>{var Pn=A(),Va=(e,r,t)=>new Pn(e,t).compare(new Pn(r,t));Cn.exports=Va});var Gn=l((vp,Vn)=>{var Ga=L(),Ba=(e,r,t)=>Ga(r,e,t);Vn.exports=Ba});var Un=l((Sp,Bn)=>{var Ua=L(),Fa=(e,r)=>Ua(e,r,!0);Bn.exports=Fa});var Ke=l((wp,Kn)=>{var Fn=A(),Ka=(e,r,t)=>{let n=new Fn(e,t),s=new Fn(r,t);return n.compare(s)||n.compareBuild(s)};Kn.exports=Ka});var Mn=l((bp,Hn)=>{var Ha=Ke(),Ma=(e,r)=>e.sort((t,n)=>Ha(t,n,r));Hn.exports=Ma});var kn=l((Ip,Xn)=>{var Xa=Ke(),ka=(e,r)=>e.sort((t,n)=>Xa(n,t,r));Xn.exports=ka});var ge=l((Rp,Wn)=>{var Wa=L(),Ya=(e,r,t)=>Wa(e,r,t)>0;Wn.exports=Ya});var He=l((Tp,Yn)=>{var Ja=L(),za=(e,r,t)=>Ja(e,r,t)<0;Yn.exports=za});var Rr=l((Ap,Jn)=>{var Qa=L(),Za=(e,r,t)=>Qa(e,r,t)===0;Jn.exports=Za});var Tr=l((xp,zn)=>{var ec=L(),rc=(e,r,t)=>ec(e,r,t)!==0;zn.exports=rc});var Me=l(($p,Qn)=>{var tc=L(),nc=(e,r,t)=>tc(e,r,t)>=0;Qn.exports=nc});var Xe=l((Np,Zn)=>{var sc=L(),ic=(e,r,t)=>sc(e,r,t)<=0;Zn.exports=ic});var Ar=l((Op,es)=>{var oc=Rr(),ac=Tr(),cc=ge(),uc=Me(),fc=He(),lc=Xe(),hc=(e,r,t,n)=>{switch(r){case"===":return typeof e=="object"&&(e=e.version),typeof t=="object"&&(t=t.version),e===t;case"!==":return typeof e=="object"&&(e=e.version),typeof t=="object"&&(t=t.version),e!==t;case"":case"=":case"==":return oc(e,t,n);case"!=":return ac(e,t,n);case">":return cc(e,t,n);case">=":return uc(e,t,n);case"<":return fc(e,t,n);case"<=":return lc(e,t,n);default:throw new TypeError(`Invalid operator: ${r}`)}};es.exports=hc});var ts=l((Lp,rs)=>{var pc=A(),mc=M(),{safeRe:ke,t:We}=se(),dc=(e,r)=>{if(e instanceof pc)return e;if(typeof e=="number"&&(e=String(e)),typeof e!="string")return null;r=r||{};let t=null;if(!r.rtl)t=e.match(ke[We.COERCE]);else{let n;for(;(n=ke[We.COERCERTL].exec(e))&&(!t||t.index+t[0].length!==e.length);)(!t||n.index+n[0].length!==t.index+t[0].length)&&(t=n),ke[We.COERCERTL].lastIndex=n.index+n[1].length+n[2].length;ke[We.COERCERTL].lastIndex=-1}return t===null?null:mc(`${t[2]}.${t[3]||"0"}.${t[4]||"0"}`,r)};rs.exports=dc});var ss=l((qp,ns)=>{"use strict";ns.exports=function(e){e.prototype[Symbol.iterator]=function*(){for(let r=this.head;r;r=r.next)yield r.value}}});var os=l((_p,is)=>{"use strict";is.exports=g;g.Node=X;g.create=g;function g(e){var r=this;if(r instanceof g||(r=new g),r.tail=null,r.head=null,r.length=0,e&&typeof e.forEach=="function")e.forEach(function(s){r.push(s)});else if(arguments.length>0)for(var t=0,n=arguments.length;t<n;t++)r.push(arguments[t]);return r}g.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var r=e.next,t=e.prev;return r&&(r.prev=t),t&&(t.next=r),e===this.head&&(this.head=r),e===this.tail&&(this.tail=t),e.list.length--,e.next=null,e.prev=null,e.list=null,r};g.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var r=this.head;e.list=this,e.next=r,r&&(r.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}};g.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var r=this.tail;e.list=this,e.prev=r,r&&(r.next=e),this.tail=e,this.head||(this.head=e),this.length++}};g.prototype.push=function(){for(var e=0,r=arguments.length;e<r;e++)gc(this,arguments[e]);return this.length};g.prototype.unshift=function(){for(var e=0,r=arguments.length;e<r;e++)yc(this,arguments[e]);return this.length};g.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}};g.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}};g.prototype.forEach=function(e,r){r=r||this;for(var t=this.head,n=0;t!==null;n++)e.call(r,t.value,n,this),t=t.next};g.prototype.forEachReverse=function(e,r){r=r||this;for(var t=this.tail,n=this.length-1;t!==null;n--)e.call(r,t.value,n,this),t=t.prev};g.prototype.get=function(e){for(var r=0,t=this.head;t!==null&&r<e;r++)t=t.next;if(r===e&&t!==null)return t.value};g.prototype.getReverse=function(e){for(var r=0,t=this.tail;t!==null&&r<e;r++)t=t.prev;if(r===e&&t!==null)return t.value};g.prototype.map=function(e,r){r=r||this;for(var t=new g,n=this.head;n!==null;)t.push(e.call(r,n.value,this)),n=n.next;return t};g.prototype.mapReverse=function(e,r){r=r||this;for(var t=new g,n=this.tail;n!==null;)t.push(e.call(r,n.value,this)),n=n.prev;return t};g.prototype.reduce=function(e,r){var t,n=this.head;if(arguments.length>1)t=r;else if(this.head)n=this.head.next,t=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var s=0;n!==null;s++)t=e(t,n.value,s),n=n.next;return t};g.prototype.reduceReverse=function(e,r){var t,n=this.tail;if(arguments.length>1)t=r;else if(this.tail)n=this.tail.prev,t=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var s=this.length-1;n!==null;s--)t=e(t,n.value,s),n=n.prev;return t};g.prototype.toArray=function(){for(var e=new Array(this.length),r=0,t=this.head;t!==null;r++)e[r]=t.value,t=t.next;return e};g.prototype.toArrayReverse=function(){for(var e=new Array(this.length),r=0,t=this.tail;t!==null;r++)e[r]=t.value,t=t.prev;return e};g.prototype.slice=function(e,r){r=r||this.length,r<0&&(r+=this.length),e=e||0,e<0&&(e+=this.length);var t=new g;if(r<e||r<0)return t;e<0&&(e=0),r>this.length&&(r=this.length);for(var n=0,s=this.head;s!==null&&n<e;n++)s=s.next;for(;s!==null&&n<r;n++,s=s.next)t.push(s.value);return t};g.prototype.sliceReverse=function(e,r){r=r||this.length,r<0&&(r+=this.length),e=e||0,e<0&&(e+=this.length);var t=new g;if(r<e||r<0)return t;e<0&&(e=0),r>this.length&&(r=this.length);for(var n=this.length,s=this.tail;s!==null&&n>r;n--)s=s.prev;for(;s!==null&&n>e;n--,s=s.prev)t.push(s.value);return t};g.prototype.splice=function(e,r,...t){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var n=0,s=this.head;s!==null&&n<e;n++)s=s.next;for(var i=[],n=0;s&&n<r;n++)i.push(s.value),s=this.removeNode(s);s===null&&(s=this.tail),s!==this.head&&s!==this.tail&&(s=s.prev);for(var n=0;n<t.length;n++)s=Ec(this,s,t[n]);return i};g.prototype.reverse=function(){for(var e=this.head,r=this.tail,t=e;t!==null;t=t.prev){var n=t.prev;t.prev=t.next,t.next=n}return this.head=r,this.tail=e,this};function Ec(e,r,t){var n=r===e.head?new X(t,null,r,e):new X(t,r,r.next,e);return n.next===null&&(e.tail=n),n.prev===null&&(e.head=n),e.length++,n}function gc(e,r){e.tail=new X(r,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function yc(e,r){e.head=new X(r,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function X(e,r,t,n){if(!(this instanceof X))return new X(e,r,t,n);this.list=n,this.value=e,r?(r.next=this,this.prev=r):this.prev=null,t?(t.prev=this,this.next=t):this.next=null}try{ss()(g)}catch(e){}});var ls=l((jp,fs)=>{"use strict";var vc=os(),k=Symbol("max"),G=Symbol("length"),oe=Symbol("lengthCalculator"),ve=Symbol("allowStale"),W=Symbol("maxAge"),V=Symbol("dispose"),as=Symbol("noDisposeOnSet"),b=Symbol("lruList"),j=Symbol("cache"),us=Symbol("updateAgeOnGet"),xr=()=>1,Nr=class{constructor(r){if(typeof r=="number"&&(r={max:r}),r||(r={}),r.max&&(typeof r.max!="number"||r.max<0))throw new TypeError("max must be a non-negative number");let t=this[k]=r.max||1/0,n=r.length||xr;if(this[oe]=typeof n!="function"?xr:n,this[ve]=r.stale||!1,r.maxAge&&typeof r.maxAge!="number")throw new TypeError("maxAge must be a number");this[W]=r.maxAge||0,this[V]=r.dispose,this[as]=r.noDisposeOnSet||!1,this[us]=r.updateAgeOnGet||!1,this.reset()}set max(r){if(typeof r!="number"||r<0)throw new TypeError("max must be a non-negative number");this[k]=r||1/0,ye(this)}get max(){return this[k]}set allowStale(r){this[ve]=!!r}get allowStale(){return this[ve]}set maxAge(r){if(typeof r!="number")throw new TypeError("maxAge must be a non-negative number");this[W]=r,ye(this)}get maxAge(){return this[W]}set lengthCalculator(r){typeof r!="function"&&(r=xr),r!==this[oe]&&(this[oe]=r,this[G]=0,this[b].forEach(t=>{t.length=this[oe](t.value,t.key),this[G]+=t.length})),ye(this)}get lengthCalculator(){return this[oe]}get length(){return this[G]}get itemCount(){return this[b].length}rforEach(r,t){t=t||this;for(let n=this[b].tail;n!==null;){let s=n.prev;cs(this,r,n,t),n=s}}forEach(r,t){t=t||this;for(let n=this[b].head;n!==null;){let s=n.next;cs(this,r,n,t),n=s}}keys(){return this[b].toArray().map(r=>r.key)}values(){return this[b].toArray().map(r=>r.value)}reset(){this[V]&&this[b]&&this[b].length&&this[b].forEach(r=>this[V](r.key,r.value)),this[j]=new Map,this[b]=new vc,this[G]=0}dump(){return this[b].map(r=>Ye(this,r)?!1:{k:r.key,v:r.value,e:r.now+(r.maxAge||0)}).toArray().filter(r=>r)}dumpLru(){return this[b]}set(r,t,n){if(n=n||this[W],n&&typeof n!="number")throw new TypeError("maxAge must be a number");let s=n?Date.now():0,i=this[oe](t,r);if(this[j].has(r)){if(i>this[k])return ae(this,this[j].get(r)),!1;let c=this[j].get(r).value;return this[V]&&(this[as]||this[V](r,c.value)),c.now=s,c.maxAge=n,c.value=t,this[G]+=i-c.length,c.length=i,this.get(r),ye(this),!0}let o=new Or(r,t,i,s,n);return o.length>this[k]?(this[V]&&this[V](r,t),!1):(this[G]+=o.length,this[b].unshift(o),this[j].set(r,this[b].head),ye(this),!0)}has(r){if(!this[j].has(r))return!1;let t=this[j].get(r).value;return!Ye(this,t)}get(r){return $r(this,r,!0)}peek(r){return $r(this,r,!1)}pop(){let r=this[b].tail;return r?(ae(this,r),r.value):null}del(r){ae(this,this[j].get(r))}load(r){this.reset();let t=Date.now();for(let n=r.length-1;n>=0;n--){let s=r[n],i=s.e||0;if(i===0)this.set(s.k,s.v);else{let o=i-t;o>0&&this.set(s.k,s.v,o)}}}prune(){this[j].forEach((r,t)=>$r(this,t,!1))}},$r=(e,r,t)=>{let n=e[j].get(r);if(n){let s=n.value;if(Ye(e,s)){if(ae(e,n),!e[ve])return}else t&&(e[us]&&(n.value.now=Date.now()),e[b].unshiftNode(n));return s.value}},Ye=(e,r)=>{if(!r||!r.maxAge&&!e[W])return!1;let t=Date.now()-r.now;return r.maxAge?t>r.maxAge:e[W]&&t>e[W]},ye=e=>{if(e[G]>e[k])for(let r=e[b].tail;e[G]>e[k]&&r!==null;){let t=r.prev;ae(e,r),r=t}},ae=(e,r)=>{if(r){let t=r.value;e[V]&&e[V](t.key,t.value),e[G]-=t.length,e[j].delete(t.key),e[b].removeNode(r)}},Or=class{constructor(r,t,n,s,i){this.key=r,this.value=t,this.length=n,this.now=s,this.maxAge=i||0}},cs=(e,r,t,n)=>{let s=t.value;Ye(e,s)&&(ae(e,t),e[ve]||(s=void 0)),s&&r.call(n,s.value,s.key,e)};fs.exports=Nr});var q=l((Dp,ds)=>{var Lr=class e{constructor(r,t){if(t=wc(t),r instanceof e)return r.loose===!!t.loose&&r.includePrerelease===!!t.includePrerelease?r:new e(r.raw,t);if(r instanceof qr)return this.raw=r.value,this.set=[[r]],this.format(),this;if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=r.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(n=>this.parseRange(n.trim())).filter(n=>n.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){let n=this.set[0];if(this.set=this.set.filter(s=>!ps(s[0])),this.set.length===0)this.set=[n];else if(this.set.length>1){for(let s of this.set)if(s.length===1&&$c(s[0])){this.set=[s];break}}}this.format()}format(){return this.range=this.set.map(r=>r.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(r){let n=((this.options.includePrerelease&&Ac)|(this.options.loose&&xc))+":"+r,s=hs.get(n);if(s)return s;let i=this.options.loose,o=i?O[x.HYPHENRANGELOOSE]:O[x.HYPHENRANGE];r=r.replace(o,Vc(this.options.includePrerelease)),S("hyphen replace",r),r=r.replace(O[x.COMPARATORTRIM],Ic),S("comparator trim",r),r=r.replace(O[x.TILDETRIM],Rc),S("tilde trim",r),r=r.replace(O[x.CARETTRIM],Tc),S("caret trim",r);let a=r.split(" ").map(u=>Nc(u,this.options)).join(" ").split(/\s+/).map(u=>Cc(u,this.options));i&&(a=a.filter(u=>(S("loose invalid filter",u,this.options),!!u.match(O[x.COMPARATORLOOSE])))),S("range list",a);let c=new Map,f=a.map(u=>new qr(u,this.options));for(let u of f){if(ps(u))return[u];c.set(u.value,u)}c.size>1&&c.has("")&&c.delete("");let h=[...c.values()];return hs.set(n,h),h}intersects(r,t){if(!(r instanceof e))throw new TypeError("a Range is required");return this.set.some(n=>ms(n,t)&&r.set.some(s=>ms(s,t)&&n.every(i=>s.every(o=>i.intersects(o,t)))))}test(r){if(!r)return!1;if(typeof r=="string")try{r=new bc(r,this.options)}catch(t){return!1}for(let t=0;t<this.set.length;t++)if(Gc(this.set[t],r,this.options))return!0;return!1}};ds.exports=Lr;var Sc=ls(),hs=new Sc({max:1e3}),wc=Be(),qr=Se(),S=Ee(),bc=A(),{safeRe:O,t:x,comparatorTrimReplace:Ic,tildeTrimReplace:Rc,caretTrimReplace:Tc}=se(),{FLAG_INCLUDE_PRERELEASE:Ac,FLAG_LOOSE:xc}=de(),ps=e=>e.value==="<0.0.0-0",$c=e=>e.value==="",ms=(e,r)=>{let t=!0,n=e.slice(),s=n.pop();for(;t&&n.length;)t=n.every(i=>s.intersects(i,r)),s=n.pop();return t},Nc=(e,r)=>(S("comp",e,r),e=qc(e,r),S("caret",e),e=Oc(e,r),S("tildes",e),e=jc(e,r),S("xrange",e),e=Pc(e,r),S("stars",e),e),$=e=>!e||e.toLowerCase()==="x"||e==="*",Oc=(e,r)=>e.trim().split(/\s+/).map(t=>Lc(t,r)).join(" "),Lc=(e,r)=>{let t=r.loose?O[x.TILDELOOSE]:O[x.TILDE];return e.replace(t,(n,s,i,o,a)=>{S("tilde",e,n,s,i,o,a);let c;return $(s)?c="":$(i)?c=`>=${s}.0.0 <${+s+1}.0.0-0`:$(o)?c=`>=${s}.${i}.0 <${s}.${+i+1}.0-0`:a?(S("replaceTilde pr",a),c=`>=${s}.${i}.${o}-${a} <${s}.${+i+1}.0-0`):c=`>=${s}.${i}.${o} <${s}.${+i+1}.0-0`,S("tilde return",c),c})},qc=(e,r)=>e.trim().split(/\s+/).map(t=>_c(t,r)).join(" "),_c=(e,r)=>{S("caret",e,r);let t=r.loose?O[x.CARETLOOSE]:O[x.CARET],n=r.includePrerelease?"-0":"";return e.replace(t,(s,i,o,a,c)=>{S("caret",e,s,i,o,a,c);let f;return $(i)?f="":$(o)?f=`>=${i}.0.0${n} <${+i+1}.0.0-0`:$(a)?i==="0"?f=`>=${i}.${o}.0${n} <${i}.${+o+1}.0-0`:f=`>=${i}.${o}.0${n} <${+i+1}.0.0-0`:c?(S("replaceCaret pr",c),i==="0"?o==="0"?f=`>=${i}.${o}.${a}-${c} <${i}.${o}.${+a+1}-0`:f=`>=${i}.${o}.${a}-${c} <${i}.${+o+1}.0-0`:f=`>=${i}.${o}.${a}-${c} <${+i+1}.0.0-0`):(S("no pr"),i==="0"?o==="0"?f=`>=${i}.${o}.${a}${n} <${i}.${o}.${+a+1}-0`:f=`>=${i}.${o}.${a}${n} <${i}.${+o+1}.0-0`:f=`>=${i}.${o}.${a} <${+i+1}.0.0-0`),S("caret return",f),f})},jc=(e,r)=>(S("replaceXRanges",e,r),e.split(/\s+/).map(t=>Dc(t,r)).join(" ")),Dc=(e,r)=>{e=e.trim();let t=r.loose?O[x.XRANGELOOSE]:O[x.XRANGE];return e.replace(t,(n,s,i,o,a,c)=>{S("xRange",e,n,s,i,o,a,c);let f=$(i),h=f||$(o),u=h||$(a),y=u;return s==="="&&y&&(s=""),c=r.includePrerelease?"-0":"",f?s===">"||s==="<"?n="<0.0.0-0":n="*":s&&y?(h&&(o=0),a=0,s===">"?(s=">=",h?(i=+i+1,o=0,a=0):(o=+o+1,a=0)):s==="<="&&(s="<",h?i=+i+1:o=+o+1),s==="<"&&(c="-0"),n=`${s+i}.${o}.${a}${c}`):h?n=`>=${i}.0.0${c} <${+i+1}.0.0-0`:u&&(n=`>=${i}.${o}.0${c} <${i}.${+o+1}.0-0`),S("xRange return",n),n})},Pc=(e,r)=>(S("replaceStars",e,r),e.trim().replace(O[x.STAR],"")),Cc=(e,r)=>(S("replaceGTE0",e,r),e.trim().replace(O[r.includePrerelease?x.GTE0PRE:x.GTE0],"")),Vc=e=>(r,t,n,s,i,o,a,c,f,h,u,y,d)=>($(n)?t="":$(s)?t=`>=${n}.0.0${e?"-0":""}`:$(i)?t=`>=${n}.${s}.0${e?"-0":""}`:o?t=`>=${t}`:t=`>=${t}${e?"-0":""}`,$(f)?c="":$(h)?c=`<${+f+1}.0.0-0`:$(u)?c=`<${f}.${+h+1}.0-0`:y?c=`<=${f}.${h}.${u}-${y}`:e?c=`<${f}.${h}.${+u+1}-0`:c=`<=${c}`,`${t} ${c}`.trim()),Gc=(e,r,t)=>{for(let n=0;n<e.length;n++)if(!e[n].test(r))return!1;if(r.prerelease.length&&!t.includePrerelease){for(let n=0;n<e.length;n++)if(S(e[n].semver),e[n].semver!==qr.ANY&&e[n].semver.prerelease.length>0){let s=e[n].semver;if(s.major===r.major&&s.minor===r.minor&&s.patch===r.patch)return!0}return!1}return!0}});var Se=l((Pp,ws)=>{var we=Symbol("SemVer ANY"),Dr=class e{static get ANY(){return we}constructor(r,t){if(t=Es(t),r instanceof e){if(r.loose===!!t.loose)return r;r=r.value}r=r.trim().split(/\s+/).join(" "),jr("comparator",r,t),this.options=t,this.loose=!!t.loose,this.parse(r),this.semver===we?this.value="":this.value=this.operator+this.semver.version,jr("comp",this)}parse(r){let t=this.options.loose?gs[ys.COMPARATORLOOSE]:gs[ys.COMPARATOR],n=r.match(t);if(!n)throw new TypeError(`Invalid comparator: ${r}`);this.operator=n[1]!==void 0?n[1]:"",this.operator==="="&&(this.operator=""),n[2]?this.semver=new vs(n[2],this.options.loose):this.semver=we}toString(){return this.value}test(r){if(jr("Comparator.test",r,this.options.loose),this.semver===we||r===we)return!0;if(typeof r=="string")try{r=new vs(r,this.options)}catch(t){return!1}return _r(r,this.operator,this.semver,this.options)}intersects(r,t){if(!(r instanceof e))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new Ss(r.value,t).test(this.value):r.operator===""?r.value===""?!0:new Ss(this.value,t).test(r.semver):(t=Es(t),t.includePrerelease&&(this.value==="<0.0.0-0"||r.value==="<0.0.0-0")||!t.includePrerelease&&(this.value.startsWith("<0.0.0")||r.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&r.operator.startsWith(">")||this.operator.startsWith("<")&&r.operator.startsWith("<")||this.semver.version===r.semver.version&&this.operator.includes("=")&&r.operator.includes("=")||_r(this.semver,"<",r.semver,t)&&this.operator.startsWith(">")&&r.operator.startsWith("<")||_r(this.semver,">",r.semver,t)&&this.operator.startsWith("<")&&r.operator.startsWith(">")))}};ws.exports=Dr;var Es=Be(),{safeRe:gs,t:ys}=se(),_r=Ar(),jr=Ee(),vs=A(),Ss=q()});var be=l((Cp,bs)=>{var Bc=q(),Uc=(e,r,t)=>{try{r=new Bc(r,t)}catch(n){return!1}return r.test(e)};bs.exports=Uc});var Rs=l((Vp,Is)=>{var Fc=q(),Kc=(e,r)=>new Fc(e,r).set.map(t=>t.map(n=>n.value).join(" ").trim().split(" "));Is.exports=Kc});var As=l((Gp,Ts)=>{var Hc=A(),Mc=q(),Xc=(e,r,t)=>{let n=null,s=null,i=null;try{i=new Mc(r,t)}catch(o){return null}return e.forEach(o=>{i.test(o)&&(!n||s.compare(o)===-1)&&(n=o,s=new Hc(n,t))}),n};Ts.exports=Xc});var $s=l((Bp,xs)=>{var kc=A(),Wc=q(),Yc=(e,r,t)=>{let n=null,s=null,i=null;try{i=new Wc(r,t)}catch(o){return null}return e.forEach(o=>{i.test(o)&&(!n||s.compare(o)===1)&&(n=o,s=new kc(n,t))}),n};xs.exports=Yc});var Ls=l((Up,Os)=>{var Pr=A(),Jc=q(),Ns=ge(),zc=(e,r)=>{e=new Jc(e,r);let t=new Pr("0.0.0");if(e.test(t)||(t=new Pr("0.0.0-0"),e.test(t)))return t;t=null;for(let n=0;n<e.set.length;++n){let s=e.set[n],i=null;s.forEach(o=>{let a=new Pr(o.semver.version);switch(o.operator){case">":a.prerelease.length===0?a.patch++:a.prerelease.push(0),a.raw=a.format();case"":case">=":(!i||Ns(a,i))&&(i=a);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${o.operator}`)}}),i&&(!t||Ns(t,i))&&(t=i)}return t&&e.test(t)?t:null};Os.exports=zc});var _s=l((Fp,qs)=>{var Qc=q(),Zc=(e,r)=>{try{return new Qc(e,r).range||"*"}catch(t){return null}};qs.exports=Zc});var Je=l((Kp,Cs)=>{var eu=A(),Ps=Se(),{ANY:ru}=Ps,tu=q(),nu=be(),js=ge(),Ds=He(),su=Xe(),iu=Me(),ou=(e,r,t,n)=>{e=new eu(e,n),r=new tu(r,n);let s,i,o,a,c;switch(t){case">":s=js,i=su,o=Ds,a=">",c=">=";break;case"<":s=Ds,i=iu,o=js,a="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(nu(e,r,n))return!1;for(let f=0;f<r.set.length;++f){let h=r.set[f],u=null,y=null;if(h.forEach(d=>{d.semver===ru&&(d=new Ps(">=0.0.0")),u=u||d,y=y||d,s(d.semver,u.semver,n)?u=d:o(d.semver,y.semver,n)&&(y=d)}),u.operator===a||u.operator===c||(!y.operator||y.operator===a)&&i(e,y.semver))return!1;if(y.operator===c&&o(e,y.semver))return!1}return!0};Cs.exports=ou});var Gs=l((Hp,Vs)=>{var au=Je(),cu=(e,r,t)=>au(e,r,">",t);Vs.exports=cu});var Us=l((Mp,Bs)=>{var uu=Je(),fu=(e,r,t)=>uu(e,r,"<",t);Bs.exports=fu});var Hs=l((Xp,Ks)=>{var Fs=q(),lu=(e,r,t)=>(e=new Fs(e,t),r=new Fs(r,t),e.intersects(r,t));Ks.exports=lu});var Xs=l((kp,Ms)=>{var hu=be(),pu=L();Ms.exports=(e,r,t)=>{let n=[],s=null,i=null,o=e.sort((h,u)=>pu(h,u,t));for(let h of o)hu(h,r,t)?(i=h,s||(s=h)):(i&&n.push([s,i]),i=null,s=null);s&&n.push([s,null]);let a=[];for(let[h,u]of n)h===u?a.push(h):!u&&h===o[0]?a.push("*"):u?h===o[0]?a.push(`<=${u}`):a.push(`${h} - ${u}`):a.push(`>=${h}`);let c=a.join(" || "),f=typeof r.raw=="string"?r.raw:String(r);return c.length<f.length?c:r}});var Qs=l((Wp,zs)=>{var ks=q(),Vr=Se(),{ANY:Cr}=Vr,Ie=be(),Gr=L(),mu=(e,r,t={})=>{if(e===r)return!0;e=new ks(e,t),r=new ks(r,t);let n=!1;e:for(let s of e.set){for(let i of r.set){let o=Eu(s,i,t);if(n=n||o!==null,o)continue e}if(n)return!1}return!0},du=[new Vr(">=0.0.0-0")],Ws=[new Vr(">=0.0.0")],Eu=(e,r,t)=>{if(e===r)return!0;if(e.length===1&&e[0].semver===Cr){if(r.length===1&&r[0].semver===Cr)return!0;t.includePrerelease?e=du:e=Ws}if(r.length===1&&r[0].semver===Cr){if(t.includePrerelease)return!0;r=Ws}let n=new Set,s,i;for(let d of e)d.operator===">"||d.operator===">="?s=Ys(s,d,t):d.operator==="<"||d.operator==="<="?i=Js(i,d,t):n.add(d.semver);if(n.size>1)return null;let o;if(s&&i){if(o=Gr(s.semver,i.semver,t),o>0)return null;if(o===0&&(s.operator!==">="||i.operator!=="<="))return null}for(let d of n){if(s&&!Ie(d,String(s),t)||i&&!Ie(d,String(i),t))return null;for(let w of r)if(!Ie(d,String(w),t))return!1;return!0}let a,c,f,h,u=i&&!t.includePrerelease&&i.semver.prerelease.length?i.semver:!1,y=s&&!t.includePrerelease&&s.semver.prerelease.length?s.semver:!1;u&&u.prerelease.length===1&&i.operator==="<"&&u.prerelease[0]===0&&(u=!1);for(let d of r){if(h=h||d.operator===">"||d.operator===">=",f=f||d.operator==="<"||d.operator==="<=",s){if(y&&d.semver.prerelease&&d.semver.prerelease.length&&d.semver.major===y.major&&d.semver.minor===y.minor&&d.semver.patch===y.patch&&(y=!1),d.operator===">"||d.operator===">="){if(a=Ys(s,d,t),a===d&&a!==s)return!1}else if(s.operator===">="&&!Ie(s.semver,String(d),t))return!1}if(i){if(u&&d.semver.prerelease&&d.semver.prerelease.length&&d.semver.major===u.major&&d.semver.minor===u.minor&&d.semver.patch===u.patch&&(u=!1),d.operator==="<"||d.operator==="<="){if(c=Js(i,d,t),c===d&&c!==i)return!1}else if(i.operator==="<="&&!Ie(i.semver,String(d),t))return!1}if(!d.operator&&(i||s)&&o!==0)return!1}return!(s&&f&&!i&&o!==0||i&&h&&!s&&o!==0||y||u)},Ys=(e,r,t)=>{if(!e)return r;let n=Gr(e.semver,r.semver,t);return n>0?e:n<0||r.operator===">"&&e.operator===">="?r:e},Js=(e,r,t)=>{if(!e)return r;let n=Gr(e.semver,r.semver,t);return n<0?e:n>0||r.operator==="<"&&e.operator==="<="?r:e};zs.exports=mu});var ze=l((Yp,ri)=>{var Br=se(),Zs=de(),gu=A(),ei=br(),yu=M(),vu=vn(),Su=wn(),wu=Rn(),bu=xn(),Iu=Nn(),Ru=Ln(),Tu=_n(),Au=Dn(),xu=L(),$u=Gn(),Nu=Un(),Ou=Ke(),Lu=Mn(),qu=kn(),_u=ge(),ju=He(),Du=Rr(),Pu=Tr(),Cu=Me(),Vu=Xe(),Gu=Ar(),Bu=ts(),Uu=Se(),Fu=q(),Ku=be(),Hu=Rs(),Mu=As(),Xu=$s(),ku=Ls(),Wu=_s(),Yu=Je(),Ju=Gs(),zu=Us(),Qu=Hs(),Zu=Xs(),ef=Qs();ri.exports={parse:yu,valid:vu,clean:Su,inc:wu,diff:bu,major:Iu,minor:Ru,patch:Tu,prerelease:Au,compare:xu,rcompare:$u,compareLoose:Nu,compareBuild:Ou,sort:Lu,rsort:qu,gt:_u,lt:ju,eq:Du,neq:Pu,gte:Cu,lte:Vu,cmp:Gu,coerce:Bu,Comparator:Uu,Range:Fu,satisfies:Ku,toComparators:Hu,maxSatisfying:Mu,minSatisfying:Xu,minVersion:ku,validRange:Wu,outside:Yu,gtr:Ju,ltr:zu,intersects:Qu,simplifyRange:Zu,subset:ef,SemVer:gu,re:Br.re,src:Br.src,tokens:Br.t,SEMVER_SPEC_VERSION:Zs.SEMVER_SPEC_VERSION,RELEASE_TYPES:Zs.RELEASE_TYPES,compareIdentifiers:ei.compareIdentifiers,rcompareIdentifiers:ei.rcompareIdentifiers}});var ni=l((Jp,ti)=>{var rf=ze();ti.exports=rf.satisfies(process.version,">=15.7.0")});var ii=l((zp,si)=>{var tf=ze();si.exports=tf.satisfies(process.version,">=16.9.0")});var Ur=l((Qp,oi)=>{var nf=ni(),sf=ii(),of={ec:["ES256","ES384","ES512"],rsa:["RS256","PS256","RS384","PS384","RS512","PS512"],"rsa-pss":["PS256","PS384","PS512"]},af={ES256:"prime256v1",ES384:"secp384r1",ES512:"secp521r1"};oi.exports=function(e,r){if(!e||!r)return;let t=r.asymmetricKeyType;if(!t)return;let n=of[t];if(!n)throw new Error(`Unknown key type "${t}".`);if(!n.includes(e))throw new Error(`"alg" parameter for "${t}" key type must be one of: ${n.join(", ")}.`);if(nf)switch(t){case"ec":let s=r.asymmetricKeyDetails.namedCurve,i=af[e];if(s!==i)throw new Error(`"alg" parameter "${e}" requires curve "${i}".`);break;case"rsa-pss":if(sf){let o=parseInt(e.slice(-3),10),{hashAlgorithm:a,mgf1HashAlgorithm:c,saltLength:f}=r.asymmetricKeyDetails;if(a!==`sha${o}`||c!==a)throw new Error(`Invalid key for this operation, its RSA-PSS parameters do not meet the requirements of "alg" ${e}.`);if(f!==void 0&&f>o>>3)throw new Error(`Invalid key for this operation, its RSA-PSS parameter saltLength does not meet the requirements of "alg" ${e}.`)}break}}});var Fr=l((Zp,ai)=>{var cf=ze();ai.exports=cf.satisfies(process.version,"^6.12.0 || >=8.0.0")});var fi=l((em,ui)=>{var v=me(),uf=gr(),ci=yr(),ff=Er(),lf=vr(),hf=Ur(),pf=Fr(),mf=De(),{KeyObject:df,createSecretKey:Ef,createPublicKey:gf}=require("crypto"),Kr=["RS256","RS384","RS512"],yf=["ES256","ES384","ES512"],Hr=["RS256","RS384","RS512"],vf=["HS256","HS384","HS512"];pf&&(Kr.splice(Kr.length,0,"PS256","PS384","PS512"),Hr.splice(Hr.length,0,"PS256","PS384","PS512"));ui.exports=function(e,r,t,n){typeof t=="function"&&!n&&(n=t,t={}),t||(t={}),t=Object.assign({},t);let s;if(n?s=n:s=function(h,u){if(h)throw h;return u},t.clockTimestamp&&typeof t.clockTimestamp!="number")return s(new v("clockTimestamp must be a number"));if(t.nonce!==void 0&&(typeof t.nonce!="string"||t.nonce.trim()===""))return s(new v("nonce must be a non-empty string"));if(t.allowInvalidAsymmetricKeyTypes!==void 0&&typeof t.allowInvalidAsymmetricKeyTypes!="boolean")return s(new v("allowInvalidAsymmetricKeyTypes must be a boolean"));let i=t.clockTimestamp||Math.floor(Date.now()/1e3);if(!e)return s(new v("jwt must be provided"));if(typeof e!="string")return s(new v("jwt must be a string"));let o=e.split(".");if(o.length!==3)return s(new v("jwt malformed"));let a;try{a=ff(e,{complete:!0})}catch(h){return s(h)}if(!a)return s(new v("invalid token"));let c=a.header,f;if(typeof r=="function"){if(!n)return s(new v("verify must be called asynchronous if secret or public key is provided as a callback"));f=r}else f=function(h,u){return u(null,r)};return f(c,function(h,u){if(h)return s(new v("error in secret or public key callback: "+h.message));let y=o[2].trim()!=="";if(!y&&u)return s(new v("jwt signature is required"));if(y&&!u)return s(new v("secret or public key must be provided"));if(!y&&!t.algorithms)return s(new v('please specify "none" in "algorithms" to verify unsigned tokens'));if(u!=null&&!(u instanceof df))try{u=gf(u)}catch(N){try{u=Ef(typeof u=="string"?Buffer.from(u):u)}catch(so){return s(new v("secretOrPublicKey is not valid key material"))}}if(t.algorithms||(u.type==="secret"?t.algorithms=vf:["rsa","rsa-pss"].includes(u.asymmetricKeyType)?t.algorithms=Hr:u.asymmetricKeyType==="ec"?t.algorithms=yf:t.algorithms=Kr),t.algorithms.indexOf(a.header.alg)===-1)return s(new v("invalid algorithm"));if(c.alg.startsWith("HS")&&u.type!=="secret")return s(new v(`secretOrPublicKey must be a symmetric key when using ${c.alg}`));if(/^(?:RS|PS|ES)/.test(c.alg)&&u.type!=="public")return s(new v(`secretOrPublicKey must be an asymmetric key when using ${c.alg}`));if(!t.allowInvalidAsymmetricKeyTypes)try{hf(c.alg,u)}catch(N){return s(N)}let d;try{d=mf.verify(e,a.header.alg,u)}catch(N){return s(N)}if(!d)return s(new v("invalid signature"));let w=a.payload;if(typeof w.nbf!="undefined"&&!t.ignoreNotBefore){if(typeof w.nbf!="number")return s(new v("invalid nbf value"));if(w.nbf>i+(t.clockTolerance||0))return s(new uf("jwt not active",new Date(w.nbf*1e3)))}if(typeof w.exp!="undefined"&&!t.ignoreExpiration){if(typeof w.exp!="number")return s(new v("invalid exp value"));if(i>=w.exp+(t.clockTolerance||0))return s(new ci("jwt expired",new Date(w.exp*1e3)))}if(t.audience){let N=Array.isArray(t.audience)?t.audience:[t.audience];if(!(Array.isArray(w.aud)?w.aud:[w.aud]).some(function(ot){return N.some(function(or){return or instanceof RegExp?or.test(ot):or===ot})}))return s(new v("jwt audience invalid. expected: "+N.join(" or ")))}if(t.issuer&&(typeof t.issuer=="string"&&w.iss!==t.issuer||Array.isArray(t.issuer)&&t.issuer.indexOf(w.iss)===-1))return s(new v("jwt issuer invalid. expected: "+t.issuer));if(t.subject&&w.sub!==t.subject)return s(new v("jwt subject invalid. expected: "+t.subject));if(t.jwtid&&w.jti!==t.jwtid)return s(new v("jwt jwtid invalid. expected: "+t.jwtid));if(t.nonce&&w.nonce!==t.nonce)return s(new v("jwt nonce invalid. expected: "+t.nonce));if(t.maxAge){if(typeof w.iat!="number")return s(new v("iat required when maxAge is specified"));let N=lf(t.maxAge,w.iat);if(typeof N=="undefined")return s(new v('"maxAge" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'));if(i>=N+(t.clockTolerance||0))return s(new ci("maxAge exceeded",new Date(N*1e3)))}if(t.complete===!0){let N=a.signature;return s(null,{header:c,payload:w,signature:N})}return s(null,w)})}});var Ei=l((rm,di)=>{var li=1/0,pi=9007199254740991,Sf=17976931348623157e292,hi=0/0,wf="[object Arguments]",bf="[object Function]",If="[object GeneratorFunction]",Rf="[object String]",Tf="[object Symbol]",Af=/^\s+|\s+$/g,xf=/^[-+]0x[0-9a-f]+$/i,$f=/^0b[01]+$/i,Nf=/^0o[0-7]+$/i,Of=/^(?:0|[1-9]\d*)$/,Lf=parseInt;function qf(e,r){for(var t=-1,n=e?e.length:0,s=Array(n);++t<n;)s[t]=r(e[t],t,e);return s}function _f(e,r,t,n){for(var s=e.length,i=t+(n?1:-1);n?i--:++i<s;)if(r(e[i],i,e))return i;return-1}function jf(e,r,t){if(r!==r)return _f(e,Df,t);for(var n=t-1,s=e.length;++n<s;)if(e[n]===r)return n;return-1}function Df(e){return e!==e}function Pf(e,r){for(var t=-1,n=Array(e);++t<e;)n[t]=r(t);return n}function Cf(e,r){return qf(r,function(t){return e[t]})}function Vf(e,r){return function(t){return e(r(t))}}var Qe=Object.prototype,Xr=Qe.hasOwnProperty,Ze=Qe.toString,Gf=Qe.propertyIsEnumerable,Bf=Vf(Object.keys,Object),Uf=Math.max;function Ff(e,r){var t=mi(e)||kf(e)?Pf(e.length,String):[],n=t.length,s=!!n;for(var i in e)(r||Xr.call(e,i))&&!(s&&(i=="length"||Hf(i,n)))&&t.push(i);return t}function Kf(e){if(!Mf(e))return Bf(e);var r=[];for(var t in Object(e))Xr.call(e,t)&&t!="constructor"&&r.push(t);return r}function Hf(e,r){return r=r==null?pi:r,!!r&&(typeof e=="number"||Of.test(e))&&e>-1&&e%1==0&&e<r}function Mf(e){var r=e&&e.constructor,t=typeof r=="function"&&r.prototype||Qe;return e===t}function Xf(e,r,t,n){e=kr(e)?e:nl(e),t=t&&!n?el(t):0;var s=e.length;return t<0&&(t=Uf(s+t,0)),zf(e)?t<=s&&e.indexOf(r,t)>-1:!!s&&jf(e,r,t)>-1}function kf(e){return Wf(e)&&Xr.call(e,"callee")&&(!Gf.call(e,"callee")||Ze.call(e)==wf)}var mi=Array.isArray;function kr(e){return e!=null&&Jf(e.length)&&!Yf(e)}function Wf(e){return Wr(e)&&kr(e)}function Yf(e){var r=Mr(e)?Ze.call(e):"";return r==bf||r==If}function Jf(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=pi}function Mr(e){var r=typeof e;return!!e&&(r=="object"||r=="function")}function Wr(e){return!!e&&typeof e=="object"}function zf(e){return typeof e=="string"||!mi(e)&&Wr(e)&&Ze.call(e)==Rf}function Qf(e){return typeof e=="symbol"||Wr(e)&&Ze.call(e)==Tf}function Zf(e){if(!e)return e===0?e:0;if(e=rl(e),e===li||e===-li){var r=e<0?-1:1;return r*Sf}return e===e?e:0}function el(e){var r=Zf(e),t=r%1;return r===r?t?r-t:r:0}function rl(e){if(typeof e=="number")return e;if(Qf(e))return hi;if(Mr(e)){var r=typeof e.valueOf=="function"?e.valueOf():e;e=Mr(r)?r+"":r}if(typeof e!="string")return e===0?e:+e;e=e.replace(Af,"");var t=$f.test(e);return t||Nf.test(e)?Lf(e.slice(2),t?2:8):xf.test(e)?hi:+e}function tl(e){return kr(e)?Ff(e):Kf(e)}function nl(e){return e?Cf(e,tl(e)):[]}di.exports=Xf});var yi=l((tm,gi)=>{var sl="[object Boolean]",il=Object.prototype,ol=il.toString;function al(e){return e===!0||e===!1||cl(e)&&ol.call(e)==sl}function cl(e){return!!e&&typeof e=="object"}gi.exports=al});var Ii=l((nm,bi)=>{var vi=1/0,ul=17976931348623157e292,Si=0/0,fl="[object Symbol]",ll=/^\s+|\s+$/g,hl=/^[-+]0x[0-9a-f]+$/i,pl=/^0b[01]+$/i,ml=/^0o[0-7]+$/i,dl=parseInt,El=Object.prototype,gl=El.toString;function yl(e){return typeof e=="number"&&e==bl(e)}function wi(e){var r=typeof e;return!!e&&(r=="object"||r=="function")}function vl(e){return!!e&&typeof e=="object"}function Sl(e){return typeof e=="symbol"||vl(e)&&gl.call(e)==fl}function wl(e){if(!e)return e===0?e:0;if(e=Il(e),e===vi||e===-vi){var r=e<0?-1:1;return r*ul}return e===e?e:0}function bl(e){var r=wl(e),t=r%1;return r===r?t?r-t:r:0}function Il(e){if(typeof e=="number")return e;if(Sl(e))return Si;if(wi(e)){var r=typeof e.valueOf=="function"?e.valueOf():e;e=wi(r)?r+"":r}if(typeof e!="string")return e===0?e:+e;e=e.replace(ll,"");var t=pl.test(e);return t||ml.test(e)?dl(e.slice(2),t?2:8):hl.test(e)?Si:+e}bi.exports=yl});var Ti=l((sm,Ri)=>{var Rl="[object Number]",Tl=Object.prototype,Al=Tl.toString;function xl(e){return!!e&&typeof e=="object"}function $l(e){return typeof e=="number"||xl(e)&&Al.call(e)==Rl}Ri.exports=$l});var Ni=l((im,$i)=>{var Nl="[object Object]";function Ol(e){var r=!1;if(e!=null&&typeof e.toString!="function")try{r=!!(e+"")}catch(t){}return r}function Ll(e,r){return function(t){return e(r(t))}}var ql=Function.prototype,Ai=Object.prototype,xi=ql.toString,_l=Ai.hasOwnProperty,jl=xi.call(Object),Dl=Ai.toString,Pl=Ll(Object.getPrototypeOf,Object);function Cl(e){return!!e&&typeof e=="object"}function Vl(e){if(!Cl(e)||Dl.call(e)!=Nl||Ol(e))return!1;var r=Pl(e);if(r===null)return!0;var t=_l.call(r,"constructor")&&r.constructor;return typeof t=="function"&&t instanceof t&&xi.call(t)==jl}$i.exports=Vl});var Li=l((om,Oi)=>{var Gl="[object String]",Bl=Object.prototype,Ul=Bl.toString,Fl=Array.isArray;function Kl(e){return!!e&&typeof e=="object"}function Hl(e){return typeof e=="string"||!Fl(e)&&Kl(e)&&Ul.call(e)==Gl}Oi.exports=Hl});var Pi=l((am,Di)=>{var Ml="Expected a function",qi=1/0,Xl=17976931348623157e292,_i=0/0,kl="[object Symbol]",Wl=/^\s+|\s+$/g,Yl=/^[-+]0x[0-9a-f]+$/i,Jl=/^0b[01]+$/i,zl=/^0o[0-7]+$/i,Ql=parseInt,Zl=Object.prototype,eh=Zl.toString;function rh(e,r){var t;if(typeof r!="function")throw new TypeError(Ml);return e=oh(e),function(){return--e>0&&(t=r.apply(this,arguments)),e<=1&&(r=void 0),t}}function th(e){return rh(2,e)}function ji(e){var r=typeof e;return!!e&&(r=="object"||r=="function")}function nh(e){return!!e&&typeof e=="object"}function sh(e){return typeof e=="symbol"||nh(e)&&eh.call(e)==kl}function ih(e){if(!e)return e===0?e:0;if(e=ah(e),e===qi||e===-qi){var r=e<0?-1:1;return r*Xl}return e===e?e:0}function oh(e){var r=ih(e),t=r%1;return r===r?t?r-t:r:0}function ah(e){if(typeof e=="number")return e;if(sh(e))return _i;if(ji(e)){var r=typeof e.valueOf=="function"?e.valueOf():e;e=ji(r)?r+"":r}if(typeof e!="string")return e===0?e:+e;e=e.replace(Wl,"");var t=Jl.test(e);return t||zl.test(e)?Ql(e.slice(2),t?2:8):Yl.test(e)?_i:+e}Di.exports=th});var Mi=l((cm,Hi)=>{var Ci=vr(),ch=Fr(),uh=Ur(),Vi=De(),fh=Ei(),er=yi(),Gi=Ii(),Yr=Ti(),Ui=Ni(),F=Li(),lh=Pi(),{KeyObject:hh,createSecretKey:ph,createPrivateKey:mh}=require("crypto"),Fi=["RS256","RS384","RS512","ES256","ES384","ES512","HS256","HS384","HS512","none"];ch&&Fi.splice(3,0,"PS256","PS384","PS512");var dh={expiresIn:{isValid:function(e){return Gi(e)||F(e)&&e},message:'"expiresIn" should be a number of seconds or string representing a timespan'},notBefore:{isValid:function(e){return Gi(e)||F(e)&&e},message:'"notBefore" should be a number of seconds or string representing a timespan'},audience:{isValid:function(e){return F(e)||Array.isArray(e)},message:'"audience" must be a string or array'},algorithm:{isValid:fh.bind(null,Fi),message:'"algorithm" must be a valid string enum value'},header:{isValid:Ui,message:'"header" must be an object'},encoding:{isValid:F,message:'"encoding" must be a string'},issuer:{isValid:F,message:'"issuer" must be a string'},subject:{isValid:F,message:'"subject" must be a string'},jwtid:{isValid:F,message:'"jwtid" must be a string'},noTimestamp:{isValid:er,message:'"noTimestamp" must be a boolean'},keyid:{isValid:F,message:'"keyid" must be a string'},mutatePayload:{isValid:er,message:'"mutatePayload" must be a boolean'},allowInsecureKeySizes:{isValid:er,message:'"allowInsecureKeySizes" must be a boolean'},allowInvalidAsymmetricKeyTypes:{isValid:er,message:'"allowInvalidAsymmetricKeyTypes" must be a boolean'}},Eh={iat:{isValid:Yr,message:'"iat" should be a number of seconds'},exp:{isValid:Yr,message:'"exp" should be a number of seconds'},nbf:{isValid:Yr,message:'"nbf" should be a number of seconds'}};function Ki(e,r,t,n){if(!Ui(t))throw new Error('Expected "'+n+'" to be a plain object.');Object.keys(t).forEach(function(s){let i=e[s];if(!i){if(!r)throw new Error('"'+s+'" is not allowed in "'+n+'"');return}if(!i.isValid(t[s]))throw new Error(i.message)})}function gh(e){return Ki(dh,!1,e,"options")}function yh(e){return Ki(Eh,!0,e,"payload")}var Bi={audience:"aud",issuer:"iss",subject:"sub",jwtid:"jti"},vh=["expiresIn","notBefore","noTimestamp","audience","issuer","subject","jwtid"];Hi.exports=function(e,r,t,n){typeof t=="function"?(n=t,t={}):t=t||{};let s=typeof e=="object"&&!Buffer.isBuffer(e),i=Object.assign({alg:t.algorithm||"HS256",typ:s?"JWT":void 0,kid:t.keyid},t.header);function o(f){if(n)return n(f);throw f}if(!r&&t.algorithm!=="none")return o(new Error("secretOrPrivateKey must have a value"));if(r!=null&&!(r instanceof hh))try{r=mh(r)}catch(f){try{r=ph(typeof r=="string"?Buffer.from(r):r)}catch(h){return o(new Error("secretOrPrivateKey is not valid key material"))}}if(i.alg.startsWith("HS")&&r.type!=="secret")return o(new Error(`secretOrPrivateKey must be a symmetric key when using ${i.alg}`));if(/^(?:RS|PS|ES)/.test(i.alg)){if(r.type!=="private")return o(new Error(`secretOrPrivateKey must be an asymmetric key when using ${i.alg}`));if(!t.allowInsecureKeySizes&&!i.alg.startsWith("ES")&&r.asymmetricKeyDetails!==void 0&&r.asymmetricKeyDetails.modulusLength<2048)return o(new Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${i.alg}`))}if(typeof e=="undefined")return o(new Error("payload is required"));if(s){try{yh(e)}catch(f){return o(f)}t.mutatePayload||(e=Object.assign({},e))}else{let f=vh.filter(function(h){return typeof t[h]!="undefined"});if(f.length>0)return o(new Error("invalid "+f.join(",")+" option for "+typeof e+" payload"))}if(typeof e.exp!="undefined"&&typeof t.expiresIn!="undefined")return o(new Error('Bad "options.expiresIn" option the payload already has an "exp" property.'));if(typeof e.nbf!="undefined"&&typeof t.notBefore!="undefined")return o(new Error('Bad "options.notBefore" option the payload already has an "nbf" property.'));try{gh(t)}catch(f){return o(f)}if(!t.allowInvalidAsymmetricKeyTypes)try{uh(i.alg,r)}catch(f){return o(f)}let a=e.iat||Math.floor(Date.now()/1e3);if(t.noTimestamp?delete e.iat:s&&(e.iat=a),typeof t.notBefore!="undefined"){try{e.nbf=Ci(t.notBefore,a)}catch(f){return o(f)}if(typeof e.nbf=="undefined")return o(new Error('"notBefore" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'))}if(typeof t.expiresIn!="undefined"&&typeof e=="object"){try{e.exp=Ci(t.expiresIn,a)}catch(f){return o(f)}if(typeof e.exp=="undefined")return o(new Error('"expiresIn" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'))}Object.keys(Bi).forEach(function(f){let h=Bi[f];if(typeof t[f]!="undefined"){if(typeof e[h]!="undefined")return o(new Error('Bad "options.'+f+'" option. The payload already has an "'+h+'" property.'));e[h]=t[f]}});let c=t.encoding||"utf8";if(typeof n=="function")n=n&&lh(n),Vi.createSign({header:i,privateKey:r,payload:e,encoding:c}).once("error",n).once("done",function(f){if(!t.allowInsecureKeySizes&&/^(?:RS|PS)/.test(i.alg)&&f.length<256)return n(new Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${i.alg}`));n(null,f)});else{let f=Vi.sign({header:i,payload:e,secret:r,encoding:c});if(!t.allowInsecureKeySizes&&/^(?:RS|PS)/.test(i.alg)&&f.length<256)throw new Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${i.alg}`);return f}}});var Jr=l((um,Xi)=>{Xi.exports={decode:Er(),verify:fi(),sign:Mi(),JsonWebTokenError:me(),NotBeforeError:gr(),TokenExpiredError:yr()}});var ki=l((fm,Sh)=>{Sh.exports={name:"dotenv",version:"16.3.1",description:"Loads environment variables from .env file",main:"lib/main.js",types:"lib/main.d.ts",exports:{".":{types:"./lib/main.d.ts",require:"./lib/main.js",default:"./lib/main.js"},"./config":"./config.js","./config.js":"./config.js","./lib/env-options":"./lib/env-options.js","./lib/env-options.js":"./lib/env-options.js","./lib/cli-options":"./lib/cli-options.js","./lib/cli-options.js":"./lib/cli-options.js","./package.json":"./package.json"},scripts:{"dts-check":"tsc --project tests/types/tsconfig.json",lint:"standard","lint-readme":"standard-markdown",pretest:"npm run lint && npm run dts-check",test:"tap tests/*.js --100 -Rspec",prerelease:"npm test",release:"standard-version"},repository:{type:"git",url:"git://github.com/motdotla/dotenv.git"},funding:"https://github.com/motdotla/dotenv?sponsor=1",keywords:["dotenv","env",".env","environment","variables","config","settings"],readmeFilename:"README.md",license:"BSD-2-Clause",devDependencies:{"@definitelytyped/dtslint":"^0.0.133","@types/node":"^18.11.3",decache:"^4.6.1",sinon:"^14.0.1",standard:"^17.0.0","standard-markdown":"^7.1.0","standard-version":"^9.5.0",tap:"^16.3.0",tar:"^6.1.11",typescript:"^4.8.4"},engines:{node:">=12"},browser:{fs:!1}}});var zi=l((lm,B)=>{var Wi=require("fs"),Qr=require("path"),wh=require("os"),bh=require("crypto"),Ih=ki(),Zr=Ih.version,Rh=/(?:^|^)\s*(?:export\s+)?([\w.-]+)(?:\s*=\s*?|:\s+?)(\s*'(?:\\'|[^'])*'|\s*"(?:\\"|[^"])*"|\s*`(?:\\`|[^`])*`|[^#\r\n]+)?\s*(?:#.*)?(?:$|$)/mg;function Th(e){let r={},t=e.toString();t=t.replace(/\r\n?/mg,`
`);let n;for(;(n=Rh.exec(t))!=null;){let s=n[1],i=n[2]||"";i=i.trim();let o=i[0];i=i.replace(/^(['"`])([\s\S]*)\1$/mg,"$2"),o==='"'&&(i=i.replace(/\\n/g,`
`),i=i.replace(/\\r/g,"\r")),r[s]=i}return r}function Ah(e){let r=Ji(e),t=I.configDotenv({path:r});if(!t.parsed)throw new Error(`MISSING_DATA: Cannot parse ${r} for an unknown reason`);let n=Yi(e).split(","),s=n.length,i;for(let o=0;o<s;o++)try{let a=n[o].trim(),c=Nh(t,a);i=I.decrypt(c.ciphertext,c.key);break}catch(a){if(o+1>=s)throw a}return I.parse(i)}function xh(e){console.log(`[dotenv@${Zr}][INFO] ${e}`)}function $h(e){console.log(`[dotenv@${Zr}][WARN] ${e}`)}function zr(e){console.log(`[dotenv@${Zr}][DEBUG] ${e}`)}function Yi(e){return e&&e.DOTENV_KEY&&e.DOTENV_KEY.length>0?e.DOTENV_KEY:process.env.DOTENV_KEY&&process.env.DOTENV_KEY.length>0?process.env.DOTENV_KEY:""}function Nh(e,r){let t;try{t=new URL(r)}catch(a){throw a.code==="ERR_INVALID_URL"?new Error("INVALID_DOTENV_KEY: Wrong format. Must be in valid uri format like dotenv://:key_1234@dotenv.org/vault/.env.vault?environment=development"):a}let n=t.password;if(!n)throw new Error("INVALID_DOTENV_KEY: Missing key part");let s=t.searchParams.get("environment");if(!s)throw new Error("INVALID_DOTENV_KEY: Missing environment part");let i=`DOTENV_VAULT_${s.toUpperCase()}`,o=e.parsed[i];if(!o)throw new Error(`NOT_FOUND_DOTENV_ENVIRONMENT: Cannot locate environment ${i} in your .env.vault file.`);return{ciphertext:o,key:n}}function Ji(e){let r=Qr.resolve(process.cwd(),".env");return e&&e.path&&e.path.length>0&&(r=e.path),r.endsWith(".vault")?r:`${r}.vault`}function Oh(e){return e[0]==="~"?Qr.join(wh.homedir(),e.slice(1)):e}function Lh(e){xh("Loading env from encrypted .env.vault");let r=I._parseVault(e),t=process.env;return e&&e.processEnv!=null&&(t=e.processEnv),I.populate(t,r,e),{parsed:r}}function qh(e){let r=Qr.resolve(process.cwd(),".env"),t="utf8",n=!!(e&&e.debug);e&&(e.path!=null&&(r=Oh(e.path)),e.encoding!=null&&(t=e.encoding));try{let s=I.parse(Wi.readFileSync(r,{encoding:t})),i=process.env;return e&&e.processEnv!=null&&(i=e.processEnv),I.populate(i,s,e),{parsed:s}}catch(s){return n&&zr(`Failed to load ${r} ${s.message}`),{error:s}}}function _h(e){let r=Ji(e);return Yi(e).length===0?I.configDotenv(e):Wi.existsSync(r)?I._configVault(e):($h(`You set DOTENV_KEY but you are missing a .env.vault file at ${r}. Did you forget to build it?`),I.configDotenv(e))}function jh(e,r){let t=Buffer.from(r.slice(-64),"hex"),n=Buffer.from(e,"base64"),s=n.slice(0,12),i=n.slice(-16);n=n.slice(12,-16);try{let o=bh.createDecipheriv("aes-256-gcm",t,s);return o.setAuthTag(i),`${o.update(n)}${o.final()}`}catch(o){let a=o instanceof RangeError,c=o.message==="Invalid key length",f=o.message==="Unsupported state or unable to authenticate data";if(a||c){let h="INVALID_DOTENV_KEY: It must be 64 characters long (or more)";throw new Error(h)}else if(f){let h="DECRYPTION_FAILED: Please check your DOTENV_KEY";throw new Error(h)}else throw console.error("Error: ",o.code),console.error("Error: ",o.message),o}}function Dh(e,r,t={}){let n=!!(t&&t.debug),s=!!(t&&t.override);if(typeof r!="object")throw new Error("OBJECT_REQUIRED: Please check the processEnv argument being passed to populate");for(let i of Object.keys(r))Object.prototype.hasOwnProperty.call(e,i)?(s===!0&&(e[i]=r[i]),n&&zr(s===!0?`"${i}" is already defined and WAS overwritten`:`"${i}" is already defined and was NOT overwritten`)):e[i]=r[i]}var I={configDotenv:qh,_configVault:Lh,_parseVault:Ah,config:_h,decrypt:jh,parse:Th,populate:Dh};B.exports.configDotenv=I.configDotenv;B.exports._configVault=I._configVault;B.exports._parseVault=I._parseVault;B.exports.config=I.config;B.exports.decrypt=I.decrypt;B.exports.parse=I.parse;B.exports.populate=I.populate;B.exports=I});var Bh={};fo(Bh,{customAuthorizer:()=>Gh,signIn:()=>Vh,signUp:()=>Ch});module.exports=lo(Bh);var no=Y(Jr());var Qi=Y(zi());Qi.config();var rr=process.env.ACCESS_ID_TOKEN,tr=process.env.SECRET_TOKEN,Re=process.env.JWT_SECRET,Zi=process.env.EXPIRES_IN,hm=process.env.SQS_URL,pm=process.env.REFRESH_TOKEN_SECRET;var ue=Y(require("aws-sdk"));var Em=new ue.SQS({apiVersion:"2012-11-05",region:"us-west-1",credentials:{accessKeyId:rr,secretAccessKey:tr}}),gm=new ue.SES({apiVersion:"2010-12-01",region:"us-west-1",credentials:{accessKeyId:rr,secretAccessKey:tr},endpoint:"http://localhost:4566/"}),ce=new ue.DynamoDB.DocumentClient({region:"localhost",credentials:{accessKeyId:rr,secretAccessKey:tr},endpoint:"http://localhost:8000/"}),K={scan(e){return R(this,null,function*(){let r={TableName:e},t=yield ce.scan(r).promise();if(!t||!t.Items)throw Error(`There was an error scanning the table ${e}`);return t.Items})},query(e,r,t){return R(this,null,function*(){let n={TableName:t,KeyConditionExpression:"#k = :v",ExpressionAttributeNames:{"#k":e},ExpressionAttributeValues:{":v":r}},s=yield ce.query(n).promise();if(!s||!s.Items)throw Error(`There was an error querying the table ${t}`);return s.Items})},update(e,r,t,n,s){return R(this,null,function*(){let i={TableName:s,Key:{[e]:r},ExpressionAttributeNames:{"#k":t},ExpressionAttributeValues:{":v":n},UpdateExpression:"SET #k = :v",ReturnValues:"ALL_NEW"},o=yield ce.update(i).promise();if(!o)throw Error(`There was an error updating the item in table ${s}`);return o.Attributes})},get(e,r,t){return R(this,null,function*(){let n={TableName:t,Key:{[e]:r}},s=yield ce.get(n).promise();return console.log(s,"data"),s.Item?s.Item:{result:"No item found"}})},delete(e,r,t){return R(this,null,function*(){let n={TableName:t,Key:{[e]:r}};if(!(yield ce.delete(n).promise()))throw Error(`There was an error deleting ${r} from ${t}`);return{result:"Successfully deleted"}})},write(e,r){return R(this,null,function*(){let t={TableName:r,Item:e};return console.log({data:e},"params"),yield ce.put(t).promise(),e})}};var fe={_DefineResponse(e=502,r={}){return{headers:{"Content-Type":"application/json","Access-Control-Allow-Methods":"*","Access-Control-Allow-Origin":"*"},statusCode:e,body:JSON.stringify(r)}},_Redirect(e=302,r={}){return{headers:{"Content-Type":"application/json","Access-Control-Allow-Methods":"*","Access-Control-Allow-Origin":"*",Location:r},statusCode:e,body:""}},_200(e={}){return this._DefineResponse(200,e)},_204(e={}){return this._DefineResponse(204,e)},_400(e={}){return this._DefineResponse(400,e)},_404(e={}){return this._DefineResponse(404,e)},_401(e={}){return this._DefineResponse(401,e)},_201(e={}){return this._DefineResponse(201,e)},_302(e={}){return this._DefineResponse(302,e)},_500(e={}){return this._DefineResponse(500,e)}};var ir=Y(Jr());var eo=Y(require("crypto")),sr=new Uint8Array(256),nr=sr.length;function et(){return nr>sr.length-16&&(eo.default.randomFillSync(sr),nr=0),sr.slice(nr,nr+=16)}var T=[];for(let e=0;e<256;++e)T.push((e+256).toString(16).slice(1));function ro(e,r=0){return T[e[r+0]]+T[e[r+1]]+T[e[r+2]]+T[e[r+3]]+"-"+T[e[r+4]]+T[e[r+5]]+"-"+T[e[r+6]]+T[e[r+7]]+"-"+T[e[r+8]]+T[e[r+9]]+"-"+T[e[r+10]]+T[e[r+11]]+T[e[r+12]]+T[e[r+13]]+T[e[r+14]]+T[e[r+15]]}var to=Y(require("crypto")),rt={randomUUID:to.default.randomUUID};function Ph(e,r,t){if(rt.randomUUID&&!r&&!e)return rt.randomUUID();e=e||{};let n=e.random||(e.rng||et)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,r){t=t||0;for(let s=0;s<16;++s)r[t+s]=n[s];return r}return ro(n)}var tt=Ph;var nt=class{generateToken(r,t,n){return R(this,null,function*(){return ir.sign(r,t,n?{expiresIn:n}:"")})}comparePasswords(r,t){return R(this,null,function*(){let n=ir.verify(t,Re);return r===n.password})}register(r,t,n){return R(this,null,function*(){let s=JSON.parse(r.body),{email:i,password:o}=s;(!i||!o)&&n(null,fe._400({message:"Invalid data | email, password are required"})),(yield K.get("email",i,"users-table")).result!=="No item found"&&n(null,fe._400({message:"User already exists"}));let c=tt(),f=yield this.generateToken({email:i,password:o,id:c},Re,"24h"),h=yield this.generateToken({email:i,password:o,id:c},Re),u=yield K.write({id:c,email:i,access_token:f,refresh_token:h},"users-table");n(null,fe._200({message:"User registered successfully",data:u}))})}login(r,t,n){return R(this,null,function*(){let s=JSON.parse(r.body),{email:i,password:o}=s;if(!i||!o)return{error:"Invalid data | email, password are required"};let a=yield K.get("email",i,"users-table");console.log(a),(!a||!a.refresh_token||!(yield this.comparePasswords(o,a.refresh_token)))&&n(null,fe._400({message:"Invalid credentials"}));let c=yield this.generateToken({email:a.email,password:o,id:a.id},Re,Zi),f=yield K.write({id:a.id,email:a.email,access_token:c,refresh_token:a.refresh_token},"users-table");n(null,fe._200({message:"User logged in successfully",data:f}))})}refreshToken(r){return R(this,null,function*(){let t=yield K.get("email",r,"users-table");return t?{refresh_token:t.refresh_token,access_token:t.access_token}:{error:"Invalid credentials"}})}},st=new nt;var Ch=(e,r,t)=>R(void 0,null,function*(){yield st.register(e,r,t)}),Vh=(e,r,t)=>R(void 0,null,function*(){yield st.login(e,r,t)}),Gh=(e,r,t)=>R(void 0,null,function*(){try{let n=e.headers.authorization.replace("Bearer ","");if(!n)return r.fail("Unauthorized"),t("Unauthorized no token");let s=yield no.decode(n),i=yield K.get("email",s.email,"users-table");i||(r.fail("Unauthorized"),t({principalId:s.id,policyDocument:it(s.id,"Unauthorized",e.methodArn)})),i.access_token!==n&&(r.fail("Unauthorized"),t({principalId:s.id,policyDocument:it(s.id,"Unauthorized",e.methodArn)})),t({principalId:s.id,policyDocument:it(s.id,"Allow",e.methodArn)})}catch(n){t("Unauthorized "+n.message)}}),it=(e,r,t)=>{let n={};if(n.principalId=e,r&&t){let s={Version:"2012-10-17",Statement:[]},i={Action:"execute-api:Invoke",Effect:r,Resource:t};s.Statement[0]=i,n.policyDocument=s}return n};0&&(module.exports={customAuthorizer,signIn,signUp});
//# sourceMappingURL=auth.js.map
